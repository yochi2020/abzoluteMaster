{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js\";\n// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n//   });\n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n//     if(testt>=1){\n//     }else{\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n//     })\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n//   const editHandle = (data)=>{\n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n//   }\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n//   const countAmount =(e,data)=>{\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n//   }\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n//     console.log(editUser)\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config';\nimport axios from 'axios';\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState({});\n  const [typeLeave, setTypeLeave] = useState({});\n  const [quota, setQuota] = useState({});\n  const refUser = firestore.collection(\"user\");\n  const refQuota = firestore.collection(\"quota\");\n  const refTypeLeave = firestore.collection('type_leave');\n  console.log(1);\n  useEffect(() => {\n    console.log(\"UseEffectttttttttttttt\");\n    const unSubscribeUser = refUser.onSnapshot(doc => {\n      doc.forEach(data => {});\n    });\n    return () => {};\n  }, []);\n  console.log(2);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkadmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    style: {\n      height: '670px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark click\",\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 23\n    }\n  }, \"\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 19\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto mr-4\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 31\n    }\n  }) : null))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkadmin","Form","firestore","axios","MDBDataTableV5","Employee","loading","setLoading","user","setUser","typeLeave","setTypeLeave","quota","setQuota","refUser","collection","refQuota","refTypeLeave","console","log","unSubscribeUser","onSnapshot","doc","forEach","data","height","width"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAOA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,UAA/B;AACA,eAAe,SAASC,QAAT,GAAoB;AACjC,QAAM,CAACC,OAAD,EAASC,UAAT,IAAqBX,QAAQ,CAAC,IAAD,CAAnC;AACA,QAAM,CAACY,IAAD,EAAMC,OAAN,IAAeb,QAAQ,CAAC,EAAD,CAA7B;AACA,QAAM,CAACc,SAAD,EAAWC,YAAX,IAAyBf,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACgB,KAAD,EAAOC,QAAP,IAAiBjB,QAAQ,CAAC,EAAD,CAA/B;AAEA,QAAMkB,OAAO,GAAEZ,SAAS,CAACa,UAAV,CAAqB,MAArB,CAAf;AACA,QAAMC,QAAQ,GAAEd,SAAS,CAACa,UAAV,CAAqB,OAArB,CAAhB;AACA,QAAME,YAAY,GAACf,SAAS,CAACa,UAAV,CAAqB,YAArB,CAAnB;AAGAG,EAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACAxB,EAAAA,SAAS,CAAC,MAAI;AACZuB,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AAEA,UAAMC,eAAe,GAAGN,OAAO,CAACO,UAAR,CAAmBC,GAAG,IAAE;AAC9CA,MAAAA,GAAG,CAACC,OAAJ,CAAYC,IAAI,IAAE,CAEjB,CAFD;AAGD,KAJuB,CAAxB;AAMA,WAAO,MAAI,CAEV,CAFD;AAGD,GAZQ,EAYP,EAZO,CAAT;AAaAN,EAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AAEA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAKE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAFF,eAUE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,KAAK,EAAE;AAACM,MAAAA,MAAM,EAAC;AAAR,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,qBAAd;AAAoC,IAAA,OAAO,EAAE,MAAI,CAAE,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADF,eAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,eAOE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQnB,OAAO,gBACH;AAAK,IAAA,SAAS,EAAC,6BAAf;AAA6C,IAAA,KAAK,EAAE;AAACoB,MAAAA,KAAK,EAAC,MAAP;AAAcD,MAAAA,MAAM,EAAC;AAArB,KAApD;AAAkF,IAAA,IAAI,EAAC,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAKZ,IAPH,CAPF,CADF,CADF,CADF,CADF,CAVF,CALF,eAkDE;AAAO,IAAA,SAAS,EAAC,sCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlDF,eAsDE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtDF,CADF;AA0DD","sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n  \n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n    \n//   });\n\n\n  \n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n\n//     if(testt>=1){\n\n//     }else{\n\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n\n\n\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n      \n//     })\n\n\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n\n    \n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n\n\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n          \n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n\n    \n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n\n\n//   const editHandle = (data)=>{\n    \n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n\n\n\n    \n    \n//   }\n\n\n  \n\n\n\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n  \n//   const countAmount =(e,data)=>{\n\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n\n//   }\n\n\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n\n//     console.log(editUser)\n\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n                              \n                 \n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n\n\n\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n                    \n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n                              \n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n                                \n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\n\n\n\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config'\nimport axios from 'axios'\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading,setLoading]=useState(true)\n  const [user,setUser]=useState({})\n  const [typeLeave,setTypeLeave]=useState({})\n  const [quota,setQuota]=useState({})\n\n  const refUser =firestore.collection(\"user\")\n  const refQuota =firestore.collection(\"quota\")\n  const refTypeLeave=firestore.collection('type_leave')\n\n\n  console.log(1)\n  useEffect(()=>{\n    console.log(\"UseEffectttttttttttttt\")\n\n    const unSubscribeUser = refUser.onSnapshot(doc=>{\n      doc.forEach(data=>{\n        \n      })\n    })\n\n    return(()=>{\n\n    })\n  },[])\n  console.log(2)\n\n  return (\n    <div>\n      <Checkadmin />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\" style={{height:'670px'}}>\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark click\" onClick={()=>{}} >พนักงาน</h3>\n                      <Form />\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                  {\n                          loading ? (\n                              <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n                              </div>\n                              \n                 \n                 ) : null\n\n                }\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}