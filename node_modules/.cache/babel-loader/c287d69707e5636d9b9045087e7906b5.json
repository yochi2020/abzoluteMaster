{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/user/Userhome.js\";\n// import React,{useEffect,useState} from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/user/Sidebar'\n// import Checkuser from './Checkuser';\n// import {firestore,auth} from '../../firebase/config'\n// import {MDBDataTableV5} from 'mdbreact'\n// const Userleave = () => {\n//     const [userId,setUserId]=useState([])\n//     const [appove,setAppove]=useState([])\n//     const [leave,setLeave]=useState([])\n//     const [typeLeave,setTypeLeave]=useState([])\n//     const refAppove = firestore.collection(\"appove\")\n//     const refLeave = firestore.collection(\"leave\")\n//     const refUser = firestore.collection(\"user\")\n//     const refTypeLeave = firestore.collection(\"type_leave\")\n//     const [leaveUser,setleaveUser]=useState([])\n//     const [loading, setLoading] = useState(true)\n//     const [datatable, setDatatable] = React.useState({\n//       columns: [\n//         {\n//           label: 'วันที่แจ้ง',\n//           field: 'leave_date',\n//           width: 150,\n//           attributes: {\n//             'aria-controls': 'DataTable',\n//             'aria-label': 'Name',\n//           },\n//         },\n//         {\n//           label: 'วันที่ลา',\n//           field: 'leave_start',\n//           width: 270,\n//         },\n//         {\n//           label: 'จำนวนวัน',\n//           field: 'amount',\n//           width: 200,\n//         },\n//         {\n//           label: 'ประเภทการลา',\n//           field: 'type_leave_name',\n//           sort: 'asc',\n//           width: 100,\n//         },\n//         {\n//           label: 'เหตุผล',\n//           field: 'reson',\n//           sort: 'disabled',\n//           width: 150,\n//         },\n//         {\n//           label: 'สถานะ',\n//           field: 'status',\n//           sort: 'disabled',\n//           width: 100,\n//         }\n//       ],})\n//      const [tee,setTee]=useState(\"sss\")\n//      setTimeout(()=>{\n//        console.log(\"eiei\")\n//        setTee(\"sssssss\")\n//      },100)\n//     useEffect(()=>{\n//       //เก็บค่ายูเซอร์\n//       const authUnsubscibe = auth.onAuthStateChanged((firebaseUser)=>{\n//         if(!!firebaseUser){\n//           refUser.doc(firebaseUser.uid).onSnapshot(doc=>{\n//             setUserId(doc.id)\n//           })\n//         }\n//       })\n//       // เก็บค่า type_leave\n//       const typeleavesubscibe =refTypeLeave.onSnapshot(doc=>{\n//         let tempArrayTypeLeave = []\n//         doc.forEach(data=>{\n//           tempArrayTypeLeave=[\n//             ...tempArrayTypeLeave,\n//             {\n//               type_leave_id:data.id,\n//               type_leave_name:data.data().type_leave_name\n//             }\n//           ]\n//         })\n//         setTypeLeave(tempArrayTypeLeave)\n//       })\n//       //เก็บค่า Appove\n//       const appovesubscibe = refAppove.onSnapshot(doc=>{\n//         let tempArrayAppove =[]\n//         doc.forEach(data=>{\n//           tempArrayAppove=[\n//             ...tempArrayAppove,\n//             {\n//               appoveId:data.id,\n//               leaveId:data.data().leave_id,\n//               hr_appove:data.data().hr_appove,\n//               hr_remark:data.data().hr_remark,\n//               leave_appove:data.data().leave_appove,\n//               leave_remark:data.data().leave_remark,\n//               status:data.data().status\n//             }\n//           ]\n//         })\n//         setAppove(tempArrayAppove)\n//       })\n//       // เก็บค่า Leave\n//       refLeave.onSnapshot(doc=>{\n//         let tempArrayLeave=[]\n//         doc.forEach(data=>{\n//           tempArrayLeave=[\n//             ...tempArrayLeave,\n//             {\n//               leaveId:data.id,\n//               type_leave_id:data.data().type_leave_id,\n//               uid:data.data().uid,\n//               amount:data.data().amount,\n//               leave_date:data.data().leave_date,\n//               leave_start:data.data().leave_start,\n//               reson:data.data().reson\n//             }\n//           ]\n//         })\n//         setLeave(tempArrayLeave)\n//       })\n//       setLoading(false)\n//       setleaveUser(findLeave)   \n//       setDatatable({...datatable,rows:leaveUser})\n//     return ()=>{\n//     }\n//     },[leave])\n//     const [test,setTest]=useState([])\n//      // หา Leave ของ user\n//      const findLeave = leave.filter(data=>(data.uid===userId))\n//      const temparrayfindleave = findLeave\n//      findLeave.forEach((dataLeave,i)=>{\n//       appove.forEach(dataAppove=>{\n//         if(dataLeave.leaveId===dataAppove.leaveId){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             ...dataAppove\n//           }\n//         }\n//       })\n//     })\n//     findLeave.forEach((dataLeave,i)=>{\n//       typeLeave.forEach(dataTypeLeave=>{\n//         if(dataLeave.type_leave_id===dataTypeLeave.type_leave_id){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             type_leave_name:dataTypeLeave.type_leave_name\n//           }\n//         }\n//       })\n//       findLeave.forEach((dataLeave,i)=>{\n//         if(dataLeave.status===\"y\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">อนุมัติ</span>\n//           }\n//         }  \n//         if(dataLeave.status===\"\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">รออนุมัติ</span>\n//           }\n//         }  \n//         if(dataLeave.status===\"n\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">ไม่อนุมัติ</span>\n//           }\n//         }  \n//       })\n//     })\n//     return (\n//       <div>\n//       <Checkuser />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\">\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{console.log(tee)}} >รายการลาทั้งหมด</h3>\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                     <MDBDataTableV5 data={datatable} entriesOptions={[5, 20, 25]} entries={5} pagesAmount={4}/>\n//                       {\n//                         loading ?(\n//                             <tr>\n//                               <td></td>\n//                               <td></td>\n//                               <td><div className=\"spinner-border mx-auto\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                             </div></td>\n//                             </tr>\n//                         )\n//                         : null\n//                       }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n//     </div >\n//     );\n// };\n// export default Userleave;\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/user/Sidebar';\nimport Checkuser from './Checkuser';\nimport { firestore, auth } from '../../firebase/config';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport $ from 'jquery';\nexport default function Userhome() {\n  const [load, setLoad] = useState(true);\n  const [userId, setUserId] = useState([]); // id this user\n\n  const [typeLeave, setTypeLeave] = useState([]); //type_leave all\n\n  const [leave, setLeave] = useState([]); //leave all\n\n  const [appove, setAppove] = useState([]); // appove all\n\n  const refUser = firestore.collection(\"user\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n  const refQuota = firestore.collection(\"quota\");\n  const refLeave = firestore.collection(\"leave\");\n  const refAppove = firestore.collection(\"appove\");\n  const [leaveOfUser, setLeaveOfUser] = useState([]);\n  const [datatable, setDatatable] = React.useState({\n    columns: [{\n      label: 'วันที่แจ้ง',\n      field: 'leave_date',\n      width: 150,\n      attributes: {\n        'aria-controls': 'DataTable',\n        'aria-label': 'Name'\n      }\n    }, {\n      label: 'วันที่ลา',\n      field: 'leave_start',\n      width: 270\n    }, {\n      label: 'จำนวนวัน',\n      field: 'amount',\n      width: 200\n    }, {\n      label: 'ประเภทการลา',\n      field: 'type_leave_name',\n      sort: 'asc',\n      width: 100\n    }, {\n      label: 'เหตุผล',\n      field: 'reson',\n      sort: 'disabled',\n      width: 150\n    }, {\n      label: 'สถานะ',\n      field: 'status',\n      sort: 'disabled',\n      width: 100\n    }]\n  });\n  console.log(1);\n  useEffect(() => {\n    console.log(\"2\"); //เก็บไอดี ของยูเซอร์นี้\n\n    const authUnsubscibe = auth.onAuthStateChanged(firebaseUser => {\n      if (!!firebaseUser) {\n        refUser.doc(firebaseUser.uid).onSnapshot(doc => {\n          setUserId(doc.id);\n        });\n      }\n    }); // เก็บค่า type_leave\n\n    const typeleavesubscibe = refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          type_leave_id: data.id,\n          type_leave_name: data.data().type_leave_name\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    }); //เก็บค่า Appove\n\n    const appovesubscibe = refAppove.onSnapshot(doc => {\n      let tempArrayAppove = [];\n      doc.forEach(data => {\n        tempArrayAppove = [...tempArrayAppove, {\n          appoveId: data.id,\n          leaveId: data.data().leave_id,\n          hr_appove: data.data().hr_appove,\n          hr_remark: data.data().hr_remark,\n          leave_appove: data.data().leave_appove,\n          leave_remark: data.data().leave_remark,\n          status: data.data().status\n        }];\n      });\n      setAppove(tempArrayAppove);\n    }); // เก็บค่า Leave\n\n    const leavesubscribe = refLeave.onSnapshot(doc => {\n      let tempArrayLeave = [];\n      doc.forEach(data => {\n        tempArrayLeave = [...tempArrayLeave, {\n          leaveId: data.id,\n          type_leave_id: data.data().type_leave_id,\n          uid: data.data().uid,\n          amount: data.data().amount,\n          leave_date: data.data().leave_date,\n          leave_start: data.data().leave_start,\n          reson: data.data().reson\n        }];\n      });\n      setLeave(tempArrayLeave);\n      setLoad(false);\n    });\n  }, []);\n  const findLeave = leave.filter(data => data.uid === userId);\n  const temparrayfindleave = findLeave;\n  setTimeout(() => {\n    console.log(\"tt\");\n  }, 5000);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkuser, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark click\",\n    onClick: () => console.log(datatable),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 23\n    }\n  }, \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E25\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 19\n    }\n  }, load ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 31\n    }\n  }) : /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 27\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/user/Userhome.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkuser","firestore","auth","MDBDataTableV5","$","Userhome","load","setLoad","userId","setUserId","typeLeave","setTypeLeave","leave","setLeave","appove","setAppove","refUser","collection","refTypeLeave","refQuota","refLeave","refAppove","leaveOfUser","setLeaveOfUser","datatable","setDatatable","columns","label","field","width","attributes","sort","console","log","authUnsubscibe","onAuthStateChanged","firebaseUser","doc","uid","onSnapshot","id","typeleavesubscibe","tempArrayTypeLeave","forEach","data","type_leave_id","type_leave_name","appovesubscibe","tempArrayAppove","appoveId","leaveId","leave_id","hr_appove","hr_remark","leave_appove","leave_remark","status","leavesubscribe","tempArrayLeave","amount","leave_date","leave_start","reson","findLeave","filter","temparrayfindleave","setTimeout","height"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,SAAT,EAAoBC,IAApB,QAAgC,uBAAhC;AACA,SAASC,cAAT,QAA+B,UAA/B;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,eAAe,SAASC,QAAT,GAAoB;AACjC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,EAAD,CAApC,CAFiC,CAEQ;;AACzC,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,EAAD,CAA1C,CAHiC,CAGa;;AAC9C,QAAM,CAACgB,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC,EAAD,CAAlC,CAJiC,CAIM;;AACvC,QAAM,CAACkB,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,EAAD,CAApC,CALiC,CAKQ;;AAGzC,QAAMoB,OAAO,GAAGf,SAAS,CAACgB,UAAV,CAAqB,MAArB,CAAhB;AACA,QAAMC,YAAY,GAAGjB,SAAS,CAACgB,UAAV,CAAqB,YAArB,CAArB;AACA,QAAME,QAAQ,GAAGlB,SAAS,CAACgB,UAAV,CAAqB,OAArB,CAAjB;AACA,QAAMG,QAAQ,GAAGnB,SAAS,CAACgB,UAAV,CAAqB,OAArB,CAAjB;AACA,QAAMI,SAAS,GAAGpB,SAAS,CAACgB,UAAV,CAAqB,QAArB,CAAlB;AAEA,QAAM,CAACK,WAAD,EAAaC,cAAb,IAA6B3B,QAAQ,CAAC,EAAD,CAA3C;AAGA,QAAM,CAAC4B,SAAD,EAAYC,YAAZ,IAA4B/B,KAAK,CAACE,QAAN,CAAe;AAC/C8B,IAAAA,OAAO,EAAE,CACP;AACEC,MAAAA,KAAK,EAAE,YADT;AAEEC,MAAAA,KAAK,EAAE,YAFT;AAGEC,MAAAA,KAAK,EAAE,GAHT;AAIEC,MAAAA,UAAU,EAAE;AACV,yBAAiB,WADP;AAEV,sBAAc;AAFJ;AAJd,KADO,EAUP;AACEH,MAAAA,KAAK,EAAE,UADT;AAEEC,MAAAA,KAAK,EAAE,aAFT;AAGEC,MAAAA,KAAK,EAAE;AAHT,KAVO,EAeP;AACEF,MAAAA,KAAK,EAAE,UADT;AAEEC,MAAAA,KAAK,EAAE,QAFT;AAGEC,MAAAA,KAAK,EAAE;AAHT,KAfO,EAoBP;AACEF,MAAAA,KAAK,EAAE,aADT;AAEEC,MAAAA,KAAK,EAAE,iBAFT;AAGEG,MAAAA,IAAI,EAAE,KAHR;AAIEF,MAAAA,KAAK,EAAE;AAJT,KApBO,EA0BP;AACEF,MAAAA,KAAK,EAAE,QADT;AAEEC,MAAAA,KAAK,EAAE,OAFT;AAGEG,MAAAA,IAAI,EAAE,UAHR;AAIEF,MAAAA,KAAK,EAAE;AAJT,KA1BO,EAgCP;AACEF,MAAAA,KAAK,EAAE,OADT;AAEEC,MAAAA,KAAK,EAAE,QAFT;AAGEG,MAAAA,IAAI,EAAE,UAHR;AAIEF,MAAAA,KAAK,EAAE;AAJT,KAhCO;AADsC,GAAf,CAAlC;AAyCAG,EAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AAEAtC,EAAAA,SAAS,CAAE,MAAM;AACfqC,IAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EADe,CAEf;;AACA,UAAMC,cAAc,GAAGhC,IAAI,CAACiC,kBAAL,CAAyBC,YAAD,IAAkB;AAC/D,UAAI,CAAC,CAACA,YAAN,EAAoB;AAClBpB,QAAAA,OAAO,CAACqB,GAAR,CAAYD,YAAY,CAACE,GAAzB,EAA8BC,UAA9B,CAAyCF,GAAG,IAAI;AAC9C5B,UAAAA,SAAS,CAAC4B,GAAG,CAACG,EAAL,CAAT;AACD,SAFD;AAGD;AACF,KANsB,CAAvB,CAHe,CAYf;;AACA,UAAMC,iBAAiB,GAAGvB,YAAY,CAACqB,UAAb,CAAwBF,GAAG,IAAI;AACvD,UAAIK,kBAAkB,GAAG,EAAzB;AACAL,MAAAA,GAAG,CAACM,OAAJ,CAAYC,IAAI,IAAI;AAClBF,QAAAA,kBAAkB,GAAG,CACnB,GAAGA,kBADgB,EAEnB;AACEG,UAAAA,aAAa,EAAED,IAAI,CAACJ,EADtB;AAEEM,UAAAA,eAAe,EAAEF,IAAI,CAACA,IAAL,GAAYE;AAF/B,SAFmB,CAArB;AAOD,OARD;AASAnC,MAAAA,YAAY,CAAC+B,kBAAD,CAAZ;AACD,KAZyB,CAA1B,CAbe,CA0Bf;;AACA,UAAMK,cAAc,GAAG1B,SAAS,CAACkB,UAAV,CAAqBF,GAAG,IAAI;AACjD,UAAIW,eAAe,GAAG,EAAtB;AACAX,MAAAA,GAAG,CAACM,OAAJ,CAAYC,IAAI,IAAI;AAClBI,QAAAA,eAAe,GAAG,CAChB,GAAGA,eADa,EAEhB;AACEC,UAAAA,QAAQ,EAAEL,IAAI,CAACJ,EADjB;AAEEU,UAAAA,OAAO,EAAEN,IAAI,CAACA,IAAL,GAAYO,QAFvB;AAGEC,UAAAA,SAAS,EAAER,IAAI,CAACA,IAAL,GAAYQ,SAHzB;AAIEC,UAAAA,SAAS,EAAET,IAAI,CAACA,IAAL,GAAYS,SAJzB;AAKEC,UAAAA,YAAY,EAAEV,IAAI,CAACA,IAAL,GAAYU,YAL5B;AAMEC,UAAAA,YAAY,EAAEX,IAAI,CAACA,IAAL,GAAYW,YAN5B;AAOEC,UAAAA,MAAM,EAAEZ,IAAI,CAACA,IAAL,GAAYY;AAPtB,SAFgB,CAAlB;AAYD,OAbD;AAcAzC,MAAAA,SAAS,CAACiC,eAAD,CAAT;AACD,KAjBsB,CAAvB,CA3Be,CAgDf;;AACA,UAAMS,cAAc,GAAGrC,QAAQ,CAACmB,UAAT,CAAsBF,GAAD,IAAS;AACnD,UAAIqB,cAAc,GAAG,EAArB;AACArB,MAAAA,GAAG,CAACM,OAAJ,CAAaC,IAAD,IAAU;AACpBc,QAAAA,cAAc,GAAI,CAChB,GAAGA,cADa,EAEhB;AACER,UAAAA,OAAO,EAAEN,IAAI,CAACJ,EADhB;AAEEK,UAAAA,aAAa,EAAED,IAAI,CAACA,IAAL,GAAYC,aAF7B;AAGEP,UAAAA,GAAG,EAAEM,IAAI,CAACA,IAAL,GAAYN,GAHnB;AAIEqB,UAAAA,MAAM,EAAEf,IAAI,CAACA,IAAL,GAAYe,MAJtB;AAKEC,UAAAA,UAAU,EAAEhB,IAAI,CAACA,IAAL,GAAYgB,UAL1B;AAMEC,UAAAA,WAAW,EAAEjB,IAAI,CAACA,IAAL,GAAYiB,WAN3B;AAOEC,UAAAA,KAAK,EAAElB,IAAI,CAACA,IAAL,GAAYkB;AAPrB,SAFgB,CAAlB;AAYD,OAbD;AAcAjD,MAAAA,QAAQ,CAAC6C,cAAD,CAAR;AACAnD,MAAAA,OAAO,CAAC,KAAD,CAAP;AAED,KAnBsB,CAAvB;AAqBD,GAtEQ,EAsEP,EAtEO,CAAT;AAuEG,QAAMwD,SAAS,GAAGnD,KAAK,CAACoD,MAAN,CAAapB,IAAI,IAAGA,IAAI,CAACN,GAAL,KAAW9B,MAA/B,CAAlB;AACA,QAAMyD,kBAAkB,GAAGF,SAA3B;AAEDG,EAAAA,UAAU,CAAC,MAAI;AAAClC,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AAAkB,GAAxB,EAAyB,IAAzB,CAAV;AACF,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAKE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAFF,eAUE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,qBAAd;AAAoC,IAAA,OAAO,EAAE,MAAMD,OAAO,CAACC,GAAR,CAAYT,SAAZ,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kGADF,CADF,CADF,eAME;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIlB,IAAI,gBAAI;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,KAAK,EAAE;AAAEuB,MAAAA,KAAK,EAAE,MAAT;AAAiBsC,MAAAA,MAAM,EAAE;AAAzB,KAA/C;AAAkF,IAAA,IAAI,EAAC,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAJ,gBAGA,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALR,CANF,CADF,CADF,CADF,CADF,CAVF,CALF,eA8CE;AAAO,IAAA,SAAS,EAAC,sCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9CF,eAkDE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlDF,CADF;AAsDD","sourcesContent":["// import React,{useEffect,useState} from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/user/Sidebar'\n// import Checkuser from './Checkuser';\n// import {firestore,auth} from '../../firebase/config'\n// import {MDBDataTableV5} from 'mdbreact'\n// const Userleave = () => {\n//     const [userId,setUserId]=useState([])\n//     const [appove,setAppove]=useState([])\n//     const [leave,setLeave]=useState([])\n//     const [typeLeave,setTypeLeave]=useState([])\n//     const refAppove = firestore.collection(\"appove\")\n//     const refLeave = firestore.collection(\"leave\")\n//     const refUser = firestore.collection(\"user\")\n//     const refTypeLeave = firestore.collection(\"type_leave\")\n//     const [leaveUser,setleaveUser]=useState([])\n//     const [loading, setLoading] = useState(true)\n\n\n\n\n//     const [datatable, setDatatable] = React.useState({\n//       columns: [\n//         {\n//           label: 'วันที่แจ้ง',\n//           field: 'leave_date',\n//           width: 150,\n//           attributes: {\n//             'aria-controls': 'DataTable',\n//             'aria-label': 'Name',\n//           },\n//         },\n//         {\n//           label: 'วันที่ลา',\n//           field: 'leave_start',\n//           width: 270,\n//         },\n//         {\n//           label: 'จำนวนวัน',\n//           field: 'amount',\n//           width: 200,\n//         },\n//         {\n//           label: 'ประเภทการลา',\n//           field: 'type_leave_name',\n//           sort: 'asc',\n//           width: 100,\n//         },\n//         {\n//           label: 'เหตุผล',\n//           field: 'reson',\n//           sort: 'disabled',\n//           width: 150,\n//         },\n//         {\n//           label: 'สถานะ',\n//           field: 'status',\n//           sort: 'disabled',\n//           width: 100,\n//         }\n//       ],})\n\n\n//      const [tee,setTee]=useState(\"sss\")\n\n//      setTimeout(()=>{\n//        console.log(\"eiei\")\n//        setTee(\"sssssss\")\n//      },100)\n//     useEffect(()=>{\n\n//       //เก็บค่ายูเซอร์\n//       const authUnsubscibe = auth.onAuthStateChanged((firebaseUser)=>{\n//         if(!!firebaseUser){\n//           refUser.doc(firebaseUser.uid).onSnapshot(doc=>{\n//             setUserId(doc.id)\n//           })\n//         }\n//       })\n\n//       // เก็บค่า type_leave\n//       const typeleavesubscibe =refTypeLeave.onSnapshot(doc=>{\n//         let tempArrayTypeLeave = []\n//         doc.forEach(data=>{\n//           tempArrayTypeLeave=[\n//             ...tempArrayTypeLeave,\n//             {\n//               type_leave_id:data.id,\n//               type_leave_name:data.data().type_leave_name\n//             }\n//           ]\n//         })\n//         setTypeLeave(tempArrayTypeLeave)\n//       })\n\n//       //เก็บค่า Appove\n//       const appovesubscibe = refAppove.onSnapshot(doc=>{\n//         let tempArrayAppove =[]\n//         doc.forEach(data=>{\n//           tempArrayAppove=[\n//             ...tempArrayAppove,\n//             {\n//               appoveId:data.id,\n//               leaveId:data.data().leave_id,\n//               hr_appove:data.data().hr_appove,\n//               hr_remark:data.data().hr_remark,\n//               leave_appove:data.data().leave_appove,\n//               leave_remark:data.data().leave_remark,\n//               status:data.data().status\n//             }\n//           ]\n//         })\n//         setAppove(tempArrayAppove)\n//       })\n\n\n\n//       // เก็บค่า Leave\n//       refLeave.onSnapshot(doc=>{\n//         let tempArrayLeave=[]\n//         doc.forEach(data=>{\n//           tempArrayLeave=[\n//             ...tempArrayLeave,\n//             {\n//               leaveId:data.id,\n//               type_leave_id:data.data().type_leave_id,\n//               uid:data.data().uid,\n//               amount:data.data().amount,\n//               leave_date:data.data().leave_date,\n//               leave_start:data.data().leave_start,\n//               reson:data.data().reson\n//             }\n//           ]\n//         })\n//         setLeave(tempArrayLeave)\n//       })\n//       setLoading(false)\n//       setleaveUser(findLeave)   \n//       setDatatable({...datatable,rows:leaveUser})\n//     return ()=>{\n\n//     }\n\n//     },[leave])\n//     const [test,setTest]=useState([])\n//      // หา Leave ของ user\n//      const findLeave = leave.filter(data=>(data.uid===userId))\n//      const temparrayfindleave = findLeave\n\n\n\n//      findLeave.forEach((dataLeave,i)=>{\n//       appove.forEach(dataAppove=>{\n//         if(dataLeave.leaveId===dataAppove.leaveId){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             ...dataAppove\n//           }\n//         }\n\n//       })\n//     })\n\n\n//     findLeave.forEach((dataLeave,i)=>{\n//       typeLeave.forEach(dataTypeLeave=>{\n//         if(dataLeave.type_leave_id===dataTypeLeave.type_leave_id){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             type_leave_name:dataTypeLeave.type_leave_name\n//           }\n//         }\n//       })\n\n\n//       findLeave.forEach((dataLeave,i)=>{\n//         if(dataLeave.status===\"y\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">อนุมัติ</span>\n//           }\n//         }  \n//         if(dataLeave.status===\"\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">รออนุมัติ</span>\n//           }\n//         }  \n//         if(dataLeave.status===\"n\"){\n//           temparrayfindleave[i]={\n//             ...temparrayfindleave[i],\n//             status:<span className=\"badge badge-pill badge-dark\">ไม่อนุมัติ</span>\n//           }\n//         }  \n//       })\n\n\n\n//     })\n//     return (\n//       <div>\n//       <Checkuser />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\">\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{console.log(tee)}} >รายการลาทั้งหมด</h3>\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                     <MDBDataTableV5 data={datatable} entriesOptions={[5, 20, 25]} entries={5} pagesAmount={4}/>\n\n//                       {\n//                         loading ?(\n//                             <tr>\n//                               <td></td>\n//                               <td></td>\n//                               <td><div className=\"spinner-border mx-auto\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                             </div></td>\n//                             </tr>\n//                         )\n//                         : null\n//                       }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n//     </div >\n//     );\n// };\n\n// export default Userleave;\n\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/user/Sidebar'\nimport Checkuser from './Checkuser';\nimport { firestore, auth } from '../../firebase/config'\nimport { MDBDataTableV5 } from 'mdbreact'\nimport $ from 'jquery'\n\nexport default function Userhome() {\n  const [load, setLoad] = useState(true)\n  const [userId, setUserId] = useState([]) // id this user\n  const [typeLeave, setTypeLeave] = useState([])//type_leave all\n  const [leave, setLeave] = useState([]) //leave all\n  const [appove, setAppove] = useState([]) // appove all\n\n\n  const refUser = firestore.collection(\"user\")\n  const refTypeLeave = firestore.collection(\"type_leave\")\n  const refQuota = firestore.collection(\"quota\")\n  const refLeave = firestore.collection(\"leave\")\n  const refAppove = firestore.collection(\"appove\")\n\n  const [leaveOfUser,setLeaveOfUser]=useState([])\n\n\n  const [datatable, setDatatable] = React.useState({\n    columns: [\n      {\n        label: 'วันที่แจ้ง',\n        field: 'leave_date',\n        width: 150,\n        attributes: {\n          'aria-controls': 'DataTable',\n          'aria-label': 'Name',\n        },\n      },\n      {\n        label: 'วันที่ลา',\n        field: 'leave_start',\n        width: 270,\n      },\n      {\n        label: 'จำนวนวัน',\n        field: 'amount',\n        width: 200,\n      },\n      {\n        label: 'ประเภทการลา',\n        field: 'type_leave_name',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'เหตุผล',\n        field: 'reson',\n        sort: 'disabled',\n        width: 150,\n      },\n      {\n        label: 'สถานะ',\n        field: 'status',\n        sort: 'disabled',\n        width: 100,\n      }\n    ],\n  })\n  console.log(1)\n  \n  useEffect( () => {\n    console.log(\"2\")\n    //เก็บไอดี ของยูเซอร์นี้\n    const authUnsubscibe = auth.onAuthStateChanged((firebaseUser) => {\n      if (!!firebaseUser) {\n        refUser.doc(firebaseUser.uid).onSnapshot(doc => {\n          setUserId(doc.id)\n        })\n      }\n    })\n\n\n    // เก็บค่า type_leave\n    const typeleavesubscibe = refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = []\n      doc.forEach(data => {\n        tempArrayTypeLeave = [\n          ...tempArrayTypeLeave,\n          {\n            type_leave_id: data.id,\n            type_leave_name: data.data().type_leave_name\n          }\n        ]\n      })\n      setTypeLeave(tempArrayTypeLeave)\n    })\n    //เก็บค่า Appove\n    const appovesubscibe = refAppove.onSnapshot(doc => {\n      let tempArrayAppove = []\n      doc.forEach(data => {\n        tempArrayAppove = [\n          ...tempArrayAppove,\n          {\n            appoveId: data.id,\n            leaveId: data.data().leave_id,\n            hr_appove: data.data().hr_appove,\n            hr_remark: data.data().hr_remark,\n            leave_appove: data.data().leave_appove,\n            leave_remark: data.data().leave_remark,\n            status: data.data().status\n          }\n        ]\n      })\n      setAppove(tempArrayAppove)\n    })\n\n\n\n    // เก็บค่า Leave\n    const leavesubscribe = refLeave.onSnapshot( (doc) => {\n      let tempArrayLeave = []\n      doc.forEach((data) => {\n        tempArrayLeave =  [\n          ...tempArrayLeave,\n          {\n            leaveId: data.id,\n            type_leave_id: data.data().type_leave_id,\n            uid: data.data().uid,\n            amount: data.data().amount,\n            leave_date: data.data().leave_date,\n            leave_start: data.data().leave_start,\n            reson: data.data().reson\n          }\n        ]\n      })\n      setLeave(tempArrayLeave)\n      setLoad(false)\n      \n    })\n      \n  },[])\n     const findLeave = leave.filter(data=>(data.uid===userId))\n     const temparrayfindleave = findLeave\n\n    setTimeout(()=>{console.log(\"tt\")},5000)\n  return (\n    <div>\n      <Checkuser />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\">\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark click\" onClick={() => console.log(datatable)}>รายการลาทั้งหมด</h3>\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                    {\n                      load ? (<div className=\"spinner-border mx-auto\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\n                      </div>\n                      )\n                        : <MDBDataTableV5></MDBDataTableV5>\n                    }\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n    </div >\n  )\n}\n\n"]},"metadata":{},"sourceType":"module"}