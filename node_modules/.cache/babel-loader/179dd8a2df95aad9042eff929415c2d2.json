{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee/Form.js\";\nimport React, { useState, useEffect } from 'react';\nimport { firestore, auth } from '../../../firebase/config';\nimport axios from 'axios';\nexport default function Form() {\n  const [data, setData] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    fname: \"\",\n    lname: \"\",\n    phone: \"\",\n    user_group: \"employee\"\n  });\n  const [typeLeave, setTypeLeave] = useState([]);\n  const refUsr = firestore.collection(\"user\");\n  const refQuota = firestore.collection(\"quota\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n\n  const clearForm = () => {\n    setData({\n      email: \"\",\n      password: \"\",\n      name: \"\",\n      fname: \"\",\n      lname: \"\",\n      phone: \"\",\n      user_group: \"employee\"\n    });\n  };\n\n  const onChangevalue = e => {\n    //เปลี่ยนค่าจำนวนการลา\n    let tempArrayTypeLeave = typeLeave;\n    let typeLeaveIndex = typeLeave.findIndex(data => {\n      return data.typeLeaveId === e.target.name;\n    });\n    tempArrayTypeLeave[typeLeaveIndex] = { ...tempArrayTypeLeave[typeLeaveIndex],\n      value: e.target.value\n    };\n    setTypeLeave(tempArrayTypeLeave);\n  };\n\n  const onSignup = () => {\n    axios.post(\"http://localhost:4000/register\", data).then(result => {\n      refUsr.doc(result.data.uid).set(data);\n      typeLeave.forEach(data => {\n        return refQuota.add({\n          type_leave_id: data.typeLeaveId,\n          amount: data.value,\n          uid: result.data.uid\n        });\n      });\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    }).catch(err => {\n      console.log(err);\n      alert(err);\n    }); // setInterval(()=>{window.location.reload()},10000)\n  };\n\n  useEffect(() => {\n    refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          typeLeaveId: data.id,\n          type_leave_name: data.data().type_leave_name,\n          value: 0\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-info\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#staticBackdrop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"staticBackdrop\",\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    tabIndex: -1,\n    \"aria-labelledby\": \"staticBackdropLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"staticBackdropLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    onClick: () => clearForm(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    onClick: () => console.log(typeLeave),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }\n  }, \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E4C\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: data.email,\n    onChange: e => {\n      setData({ ...data,\n        email: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 23\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    value: data.password,\n    onChange: e => {\n      setData({ ...data,\n        password: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 23\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E48\\u0E19\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: data.name,\n    onChange: e => {\n      setData({ ...data,\n        name: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 23\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E23\\u0E34\\u0E07\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: data.fname,\n    onChange: e => {\n      setData({ ...data,\n        fname: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 23\n    }\n  }, \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: data.lname,\n    onChange: e => {\n      setData({ ...data,\n        lname: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }\n  }, \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: data.phone,\n    onChange: e => {\n      setData({ ...data,\n        phone: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, typeLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, data.type_leave_name), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    min: \"0\",\n    defaultValue: \"0\",\n    name: data.typeLeaveId,\n    onChange: e => {\n      onChangevalue(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => clearForm(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, \"\\u0E1B\\u0E34\\u0E14\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E08\\u0E2D\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {\n      onSignup();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"))))));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee/Form.js"],"names":["React","useState","useEffect","firestore","auth","axios","Form","data","setData","email","password","name","fname","lname","phone","user_group","typeLeave","setTypeLeave","refUsr","collection","refQuota","refTypeLeave","clearForm","onChangevalue","e","tempArrayTypeLeave","typeLeaveIndex","findIndex","typeLeaveId","target","value","onSignup","post","then","result","doc","uid","set","forEach","add","type_leave_id","amount","setTimeout","window","location","reload","catch","err","console","log","alert","onSnapshot","id","type_leave_name","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { firestore, auth } from '../../../firebase/config'\nimport axios from 'axios'\nexport default function Form() {\n  const [data, setData] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    fname: \"\",\n    lname: \"\",\n    phone: \"\",\n    user_group: \"employee\"\n  })\n  const [typeLeave,setTypeLeave]=useState([])\n\n  const refUsr = firestore.collection(\"user\")\n  const refQuota = firestore.collection(\"quota\")\n  const refTypeLeave = firestore.collection(\"type_leave\")\n\n  const clearForm = () => {\n    setData({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    fname: \"\",\n    lname: \"\",\n    phone: \"\",\n    user_group: \"employee\"\n    })\n\n   }\n\n  const onChangevalue = (e)=>{ //เปลี่ยนค่าจำนวนการลา\n    let tempArrayTypeLeave = typeLeave\n    let typeLeaveIndex = typeLeave.findIndex(data=>{\n      return data.typeLeaveId===e.target.name\n    })\n    tempArrayTypeLeave[typeLeaveIndex]={\n      ...tempArrayTypeLeave[typeLeaveIndex],\n      value:e.target.value\n    }\n    setTypeLeave(tempArrayTypeLeave)\n  }\n\n  const onSignup = ()=>{\n    axios.post(\"http://localhost:4000/register\",data)\n    .then(result=>{\n      refUsr.doc(result.data.uid)\n      .set(data)\n\n      typeLeave.forEach( data=>{\n        return  refQuota.add({\n          type_leave_id:data.typeLeaveId,\n          amount:data.value,\n          uid:result.data.uid\n        })\n      })\n      setTimeout(() => {\n        window.location.reload()\n      },2000);\n    }).catch(err=>{\n      console.log(err)\n      alert(err)\n    })\n\n    // setInterval(()=>{window.location.reload()},10000)\n\n  }\n  useEffect(()=>{\n    refTypeLeave.onSnapshot(doc=>{\n      let tempArrayTypeLeave=[]\n      doc.forEach(data=>{\n        tempArrayTypeLeave=[\n          ...tempArrayTypeLeave,\n          {\n            typeLeaveId:data.id,\n            type_leave_name:data.data().type_leave_name,\n            value:0\n          }\n        ]\n      })\n      setTypeLeave(tempArrayTypeLeave)\n    })\n    \n  },[])\n\n\n\n  return (\n    <div>\n      <button className=\"btn btn-sm btn-info\" data-toggle=\"modal\" data-target=\"#staticBackdrop\">เพิ่มพนักงาน</button>\n      {/* <!-- Modal --> */}\n      <div className=\"modal fade\" id=\"staticBackdrop\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex={-1} aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog modal-xl\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"staticBackdropLabel\">เพิ่มพนักงาน</h5>\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\" onClick={() => clearForm()}>×</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"container-fluid\">\n                <div className=\"row\">\n                  <div className=\"col-md-4\">\n                    <div className=\"form-group\">\n                      <label onClick={() => console.log(typeLeave)}>อีเมล์</label>\n                      <input type=\"text\" className=\"form-control\" value={data.email} onChange={(e)=>{setData({...data,email:e.target.value})}} ></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>Password</label>\n                      <input type=\"password\" className=\"form-control\" value={data.password} onChange={(e)=>{setData({...data,password:e.target.value})}} ></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>ชื่อเล่น</label>\n                      <input type=\"text\" className=\"form-control\" value={data.name} onChange={(e)=>{setData({...data,name:e.target.value})}}></input>\n                    </div>\n                  </div>\n                  <div className=\"col-md-4\">\n                    <div className=\"form-group\">\n                      <label>ชื่อจริง</label>\n                      <input type=\"text\" className=\"form-control\" value={data.fname} onChange={(e)=>{setData({...data,fname:e.target.value})}}></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>นามสกุล</label>\n                      <input type=\"text\" className=\"form-control\" value={data.lname} onChange={(e)=>{setData({...data,lname:e.target.value})}}></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>เบอร์โทรศัพ</label>\n                      <input type=\"text\" className=\"form-control\"value={data.phone} onChange={(e)=>{setData({...data,phone:e.target.value})}} ></input>\n                    </div>\n                  </div>\n                  <div className=\"col-md-2\">\n                      {\n                        typeLeave.map((data,index)=>(\n                          <div className=\"form-group\" key={index}> \n                            <label>{data.type_leave_name}</label>\n                            <input type=\"number\" className=\"form-control\"  min=\"0\" defaultValue=\"0\" name={data.typeLeaveId} onChange={(e)=>{onChangevalue(e)}}/>\n                          </div>\n                        ))\n                      }\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={() => clearForm()}>ปิดหน้าจอ</button>\n              <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={() => {onSignup() }}>บันทึก</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}