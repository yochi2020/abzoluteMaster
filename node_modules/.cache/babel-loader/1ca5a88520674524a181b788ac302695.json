{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js\";\n// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n//   });\n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n//     if(testt>=1){\n//     }else{\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n//     })\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n//   const editHandle = (data)=>{\n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n//   }\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n//   const countAmount =(e,data)=>{\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n//   }\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n//     console.log(editUser)\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config';\nimport axios from 'axios';\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const [quotaOfUser, setQuotaOfUser] = useState([]);\n  const [dataEdit, setDataEdit] = useState({});\n  const refUser = firestore.collection(\"user\");\n  const refQuota = firestore.collection(\"quota\");\n  const refLeave = firestore.collection(\"leave\");\n  const refTypeLeave = firestore.collection('type_leave');\n  const refAppove = firestore.collection(\"appove\");\n  const [datatable, setDatatable] = useState({\n    columns: [{\n      label: 'ชื่อพนักงาน',\n      field: 'name',\n      width: 200,\n      attributes: {\n        'aria-controls': 'DataTable',\n        'aria-label': 'Name'\n      }\n    }, {\n      label: 'อีเมล',\n      field: 'email',\n      width: 200\n    }, {\n      label: 'เบอร์โทร',\n      field: 'phone',\n      width: 200\n    }, {\n      label: 'แก้ไข',\n      field: 'edit',\n      sort: 'asc',\n      width: 5\n    }, {\n      label: 'ลบ',\n      field: 'delete',\n      sort: 'asc',\n      width: 5\n    }]\n  });\n  useEffect(() => {\n    refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          typeLeaveId: data.id,\n          type_leave_name: data.data().type_leave_name\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    });\n    refUser.onSnapshot(doc => {\n      let tempArrayUser = [];\n      doc.forEach(data => {\n        tempArrayUser = [...tempArrayUser, {\n          email: data.data().email,\n          fname: data.data().fname,\n          lname: data.data().lname,\n          name: data.data().name,\n          phone: data.data().phone,\n          uid: data.id,\n          user_group: data.data().user_group,\n          edit: /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-sm btn-outline-success \",\n            \"data-toggle\": \"modal\",\n            \"data-target\": \"#staticBackdrop2\",\n            onClick: () => {\n              clickEditHandle(data.data(), data.id);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }\n          }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"),\n          delete: /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-sm btn-outline-danger\",\n            onClick: () => {\n              deleteHandle(data.id);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 21\n            }\n          }, \"\\u0E25\\u0E1A\")\n        }];\n      });\n      setUser(tempArrayUser);\n      setLoading(false);\n    });\n    setDatatable({ ...datatable,\n      rows: user\n    });\n    return () => {};\n  }, [loading]);\n\n  const deleteHandle = id => {\n    refLeave.where(\"uid\", \"==\", id).onSnapshot(doc => {\n      let tempArrayLeaveOfUser = [];\n      doc.forEach(data => {\n        tempArrayLeaveOfUser = [...tempArrayLeaveOfUser, {\n          leaveId: data.id,\n          reason: data.data().reson\n        }];\n      });\n      tempArrayLeaveOfUser.forEach(dataLeaveOfUser => {\n        refAppove.where(\"leave_id\", \"==\", dataLeaveOfUser.leaveId).onSnapshot(doc => {\n          doc.forEach(data => {\n            refAppove.doc(data.id).delete();\n          });\n        });\n        refLeave.doc(dataLeaveOfUser.leaveId).delete();\n      });\n      refQuota.where(\"uid\", \"==\", id).onSnapshot(doc => {\n        doc.forEach(data => {\n          refQuota.doc(data.id).delete();\n        });\n      });\n      refUser.doc(id).delete();\n    }); // delete user\n\n    axios.post(\"http://localhost:4000/deleteuser\", {\n      id\n    }).then(() => {\n      console.log(\"Delete User Success\");\n      setLoading(true);\n    });\n  };\n\n  const submitEditHandle = () => {\n    console.log(dataEdit);\n  };\n\n  const clickEditHandle = (data, uid) => {\n    refQuota.where(\"uid\", \"==\", uid).onSnapshot(doc => {\n      let tempArrayQuotaUser = [];\n      doc.forEach(data => {\n        tempArrayQuotaUser = [...tempArrayQuotaUser, {\n          quotaId: data.id,\n          type_leave_id: data.data().type_leave_id,\n          amount: data.data().amount,\n          uid: data.data().uid\n        }];\n      });\n      setQuotaOfUser(tempArrayQuotaUser);\n      setDataEdit({ ...data,\n        uid: uid\n      });\n    });\n    console.log(typeLeave);\n  };\n\n  const [test, setTest] = useState([]); //   const editHandle = (data)=>{\n  //     clearHandle()\n  //     firestore.collection(\"quota\").where('uid','==',data.uid)\n  //     .onSnapshot(doc=>{\n  //       let tempArrayquota =[]\n  //       doc.forEach(data=>{\n  //         tempArrayquota=[\n  //           ...tempArrayquota,\n  //           {\n  //             amount:data.data().amount,\n  //             type_leave_id:data.data().type_leave_id,\n  //             uid:data.data().uid\n  //           }\n  //         ]\n  //       })\n  //       setEditQuota(tempArrayquota)\n  //       setEditUser(data)\n  //     })\n  //   }\n\n  const quotaChange = e => {\n    const tempArray = test;\n    tempArray.filter(data => {}); // if (e.target.name === test.quotaId) {\n    //   const eiei = {\n    //     amount: e.target.value,\n    //     quotaId: e.target.name\n    //   }\n    //   console.log(\"ซ้ำ\")\n    // } else {\n    //   const eiei = {\n    //     amount: e.target.value,\n    //     quotaId: e.target.name\n    //   }\n    //   a.push({...eiei})\n    //   setTest(a)\n    // }\n    // const  eiei = {\n    //   amount:e.target.value,\n    //   quotaId:e.target.name\n    // }\n    // a.push({...eiei})\n    // setTest(a)\n\n    console.log(test[0].quotaId);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkadmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    style: {\n      height: '670px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark click\",\n    onClick: () => {\n      console.log(typeLeave);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 23\n    }\n  }, \"\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 19\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto mr-4\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    hover: true,\n    entriesOptions: [5, 20, 25],\n    entries: 5,\n    pagesAmount: 4,\n    data: datatable,\n    searchTop: true,\n    searchBottom: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 27\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"staticBackdrop2\",\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    tabIndex: \"-1\",\n    \"aria-labelledby\": \"staticBackdropLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"staticBackdropLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 15\n    }\n  }, \"Modal title\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    onClick: () => {\n      console.log(quotaOfUser);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    onClick: () => {\n      console.log(test);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 23\n    }\n  }, \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E4C\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: dataEdit.email,\n    onChange: e => {\n      setDataEdit({ ...dataEdit,\n        email: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 689,\n      columnNumber: 23\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E48\\u0E19\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: dataEdit.name,\n    onChange: e => {\n      setDataEdit({ ...dataEdit,\n        name: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 692,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 23\n    }\n  }, \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: dataEdit.phone,\n    onChange: e => {\n      setDataEdit({ ...dataEdit,\n        phone: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 698,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 699,\n      columnNumber: 23\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E23\\u0E34\\u0E07\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: dataEdit.fname,\n    onChange: e => {\n      setDataEdit({ ...dataEdit,\n        fname: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 23\n    }\n  }, \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: dataEdit.lname,\n    onChange: e => {\n      setDataEdit({ ...dataEdit,\n        lname: e.target.value\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 19\n    }\n  }, quotaOfUser.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 25\n    }\n  }, typeLeave.map((dataTypeLeave, i) => {\n    if (dataTypeLeave.typeLeaveId === data.type_leave_id) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 40\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 35\n        }\n      }, dataTypeLeave.type_leave_name), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: data.quotaId,\n        defaultValue: data.amount,\n        onChange: e => {\n          quotaChange(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 35\n        }\n      }));\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 15\n    }\n  }, \"\\u0E1B\\u0E34\\u0E14\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {\n      submitEditHandle();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 15\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"))))));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkadmin","Form","firestore","axios","MDBDataTableV5","Employee","loading","setLoading","user","setUser","typeLeave","setTypeLeave","quotaOfUser","setQuotaOfUser","dataEdit","setDataEdit","refUser","collection","refQuota","refLeave","refTypeLeave","refAppove","datatable","setDatatable","columns","label","field","width","attributes","sort","onSnapshot","doc","tempArrayTypeLeave","forEach","data","typeLeaveId","id","type_leave_name","tempArrayUser","email","fname","lname","name","phone","uid","user_group","edit","clickEditHandle","delete","deleteHandle","rows","where","tempArrayLeaveOfUser","leaveId","reason","reson","dataLeaveOfUser","post","then","console","log","submitEditHandle","tempArrayQuotaUser","quotaId","type_leave_id","amount","test","setTest","quotaChange","e","tempArray","filter","height","target","value","map","index","dataTypeLeave","i"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAOA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA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","sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n\n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n\n//   });\n\n\n\n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n\n//     if(testt>=1){\n\n//     }else{\n\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n\n\n\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n\n//     })\n\n\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n\n\n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n\n\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n\n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n\n\n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n\n\n//   const editHandle = (data)=>{\n\n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n\n\n\n\n\n//   }\n\n\n\n\n\n\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n\n//   const countAmount =(e,data)=>{\n\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n\n//   }\n\n\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n\n//     console.log(editUser)\n\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n\n\n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n\n\n\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n\n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n\n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n\n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\n\n\n\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config'\nimport axios from 'axios'\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading, setLoading] = useState(true)\n  const [user, setUser] = useState([])\n  const [typeLeave, setTypeLeave] = useState([])\n  const [quotaOfUser, setQuotaOfUser] = useState([])\n  const [dataEdit, setDataEdit] = useState({})\n  const refUser = firestore.collection(\"user\")\n  const refQuota = firestore.collection(\"quota\")\n  const refLeave = firestore.collection(\"leave\")\n  const refTypeLeave = firestore.collection('type_leave')\n  const refAppove = firestore.collection(\"appove\")\n  const [datatable, setDatatable] = useState({\n    columns: [\n      {\n        label: 'ชื่อพนักงาน',\n        field: 'name',\n        width: 200,\n        attributes: {\n          'aria-controls': 'DataTable',\n          'aria-label': 'Name',\n        },\n      },\n      {\n        label: 'อีเมล',\n        field: 'email',\n        width: 200,\n      },\n      {\n        label: 'เบอร์โทร',\n        field: 'phone',\n        width: 200,\n      },\n      {\n        label: 'แก้ไข',\n        field: 'edit',\n        sort: 'asc',\n        width: 5,\n      },\n      {\n        label: 'ลบ',\n        field: 'delete',\n        sort: 'asc',\n        width: 5,\n      }\n    ],\n\n  });\n\n\n\n\n\n\n\n  useEffect(() => {\n    refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = []\n      doc.forEach(data => {\n        tempArrayTypeLeave = [\n          ...tempArrayTypeLeave,\n          {\n            typeLeaveId: data.id,\n            type_leave_name: data.data().type_leave_name\n          }\n        ]\n      })\n      setTypeLeave(tempArrayTypeLeave)\n    })\n    refUser.onSnapshot(doc => {\n      let tempArrayUser = []\n      doc.forEach(data => {\n        tempArrayUser = [\n          ...tempArrayUser,\n          {\n            email: data.data().email,\n            fname: data.data().fname,\n            lname: data.data().lname,\n            name: data.data().name,\n            phone: data.data().phone,\n            uid: data.id,\n            user_group: data.data().user_group,\n            edit: <button className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={() => { clickEditHandle(data.data(), data.id) }}>แก้ไข</button>,\n            delete: <button className=\"btn btn-sm btn-outline-danger\" onClick={() => { deleteHandle(data.id) }}>ลบ</button>\n          }\n        ]\n      })\n      setUser(tempArrayUser)\n      setLoading(false)\n    })\n    setDatatable({ ...datatable, rows: user })\n    return (() => {\n    })\n  }, [loading])\n\n\n  const deleteHandle = (id) => {\n    refLeave.where(\"uid\", \"==\", id)\n      .onSnapshot(doc => {\n        let tempArrayLeaveOfUser = []\n        doc.forEach(data => {\n          tempArrayLeaveOfUser = [\n            ...tempArrayLeaveOfUser,\n            {\n              leaveId: data.id,\n              reason: data.data().reson\n            }\n          ]\n        })\n        tempArrayLeaveOfUser.forEach(dataLeaveOfUser => {\n          refAppove.where(\"leave_id\", \"==\", dataLeaveOfUser.leaveId)\n            .onSnapshot(doc => {\n              doc.forEach(data => {\n                refAppove.doc(data.id).delete()\n              })\n            })\n\n          refLeave.doc(dataLeaveOfUser.leaveId).delete()\n        })\n        refQuota.where(\"uid\", \"==\", id)\n          .onSnapshot(doc => {\n            doc.forEach(data => {\n              refQuota.doc(data.id).delete()\n            })\n          })\n        refUser.doc(id).delete()\n      })\n    // delete user\n    axios.post(\"http://localhost:4000/deleteuser\", { id })\n      .then(() => {\n        console.log(\"Delete User Success\")\n        setLoading(true)\n      })\n  }\n\n\n  const submitEditHandle = () => {\n    console.log(dataEdit)\n  }\n\n\n\n  const clickEditHandle = (data, uid) => {\n    refQuota.where(\"uid\", \"==\", uid)\n      .onSnapshot(doc => {\n        let tempArrayQuotaUser = []\n        doc.forEach(data => {\n          tempArrayQuotaUser = [\n            ...tempArrayQuotaUser,\n            {\n              quotaId: data.id,\n              type_leave_id: data.data().type_leave_id,\n              amount: data.data().amount,\n              uid: data.data().uid\n            }\n          ]\n        })\n\n\n        setQuotaOfUser(tempArrayQuotaUser)\n        setDataEdit({ ...data, uid: uid })\n      })\n    console.log(typeLeave)\n  }\n  const [test, setTest] = useState([])\n\n  //   const editHandle = (data)=>{\n\n  //     clearHandle()\n  //     firestore.collection(\"quota\").where('uid','==',data.uid)\n  //     .onSnapshot(doc=>{\n  //       let tempArrayquota =[]\n  //       doc.forEach(data=>{\n  //         tempArrayquota=[\n  //           ...tempArrayquota,\n  //           {\n  //             amount:data.data().amount,\n  //             type_leave_id:data.data().type_leave_id,\n  //             uid:data.data().uid\n  //           }\n  //         ]\n  //       })\n  //       setEditQuota(tempArrayquota)\n  //       setEditUser(data)\n  //     })\n\n\n\n\n\n  //   }\n  const quotaChange = (e) => {\n    const tempArray = test\n\n    tempArray.filter(data=>{\n      \n    })\n\n\n    // if (e.target.name === test.quotaId) {\n    //   const eiei = {\n    //     amount: e.target.value,\n    //     quotaId: e.target.name\n    //   }\n    //   console.log(\"ซ้ำ\")\n    // } else {\n    //   const eiei = {\n    //     amount: e.target.value,\n    //     quotaId: e.target.name\n    //   }\n    //   a.push({...eiei})\n    //   setTest(a)\n    // }\n    // const  eiei = {\n    //   amount:e.target.value,\n    //   quotaId:e.target.name\n    // }\n    // a.push({...eiei})\n\n    // setTest(a)\n    console.log(test[0].quotaId)\n  }\n  return (\n    <div>\n      <Checkadmin />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\" style={{ height: '670px' }}>\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark click\" onClick={() => { console.log(typeLeave) }} >พนักงาน</h3>\n                      <Form />\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                    {\n                      loading ? (\n                        <div className=\"spinner-border mx-auto mr-4\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\n                        </div>\n                      ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]} entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false} />\n                    }\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n\n      {/* <!-- Modal of Edit user --> */}\n      <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog modal-xl\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\" onClick={() => { console.log(quotaOfUser) }}>&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"container-fluid\">\n                <div className=\"row\">\n                  <div className=\"col-md-4\">\n                    <div className=\"form-group\">\n                      <label onClick={() => { console.log(test) }}>อีเมล์</label>\n                      <input type=\"text\" className=\"form-control\" value={dataEdit.email} onChange={(e) => { setDataEdit({ ...dataEdit, email: e.target.value }) }} />\n                    </div>\n                    <div className=\"form-group\">\n                      <label>ชื่อเล่น</label>\n                      <input type=\"text\" className=\"form-control\" value={dataEdit.name} onChange={(e) => { setDataEdit({ ...dataEdit, name: e.target.value }) }}></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>เบอร์โทรศัพ</label>\n                      <input type=\"text\" className=\"form-control\" value={dataEdit.phone} onChange={(e) => { setDataEdit({ ...dataEdit, phone: e.target.value }) }}></input>\n                    </div>\n                  </div>\n                  <div className=\"col-md-4\">\n                    <div className=\"form-group\">\n                      <label>ชื่อจริง</label>\n                      <input type=\"text\" className=\"form-control\" value={dataEdit.fname} onChange={(e) => { setDataEdit({ ...dataEdit, fname: e.target.value }) }}></input>\n                    </div>\n                    <div className=\"form-group\">\n                      <label>นามสกุล</label>\n                      <input type=\"text\" className=\"form-control\" value={dataEdit.lname} onChange={(e) => { setDataEdit({ ...dataEdit, lname: e.target.value }) }}></input>\n                    </div>\n\n                  </div>\n                  <div className=\"col-md-3\">\n                    {\n                      quotaOfUser.map((data, index) => (\n                        <div className=\"form-group\" key={index}>\n                          {\n                            typeLeave.map((dataTypeLeave, i) => {\n                              if (dataTypeLeave.typeLeaveId === data.type_leave_id) {\n                                return <div key={i}>\n                                  <label >{dataTypeLeave.type_leave_name}</label>\n                                  <input type=\"number\" className=\"form-control\" name={data.quotaId} defaultValue={data.amount} onChange={(e) => { quotaChange(e) }} />\n                                </div>\n                              }\n                            })\n                          }\n                        </div>\n                      ))\n                    }\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={() => { }}>ปิด</button>\n              <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={() => { submitEditHandle() }}>บันทึก</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}