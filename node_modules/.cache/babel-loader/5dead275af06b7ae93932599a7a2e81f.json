{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js\";\nimport React, { useState, useEffect } from 'react';\nimport { firestore } from '../../../firebase/config';\nexport default function Leavelist(props) {\n  const [appove, setAppove] = useState([]);\n  const [leave, setLeave] = useState([]);\n  const [user, setUser] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const refLeave = firestore.collection(\"leave\");\n  const refUser = firestore.collection(\"user\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n  useEffect(() => {\n    setAppove(props.data);\n\n    if (props.data.status === \"\") {\n      setAppove({ ...props.data,\n        status: \"รออนุมัติ\"\n      });\n    }\n\n    refLeave.onSnapshot(doc => {\n      //ดึงLeave ทั้งหมด\n      let tempArrayLeave = [];\n      doc.forEach(data => {\n        tempArrayLeave = [...tempArrayLeave, {\n          amount: data.data().amount,\n          leave_date: data.data().leave_date,\n          leave_start: data.data().leave_start,\n          reson: data.data().reson,\n          type_leave_id: data.data().type_leave_id,\n          uid: data.id,\n          //ไอดีของ leave\n          user_id: data.data().uid // ไอดีของ user\n\n        }];\n      });\n      setLeave(tempArrayLeave);\n    });\n    refUser.onSnapshot(doc => {\n      // ดึงยูเซอร์ทั้งหมด\n      let tempArrayUser = [];\n      doc.forEach(data => {\n        tempArrayUser = [...tempArrayUser, {\n          email: data.data().email,\n          fname: data.data().fname,\n          lname: data.data().lname,\n          phone: data.data().phone,\n          uid: data.data().uid,\n          user_group: data.data().user_group\n        }];\n      });\n      setUser(tempArrayUser);\n    });\n    refTypeLeave.onSnapshot(doc => {\n      //ดึง TypeLeave ทั้งหมด\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          type_leave_name: data.data().type_leave_name,\n          id: data.id\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    }); ///////////ทำต่อตรงนี้\n\n    return () => {};\n  }, []);\n  var appoveLeave = leave.filter(data => data.uid === appove.leave_id);\n  var appoveLeave_typeLeavejoin = appoveLeave.map(data => {\n    return data.type_leave_id;\n  });\n  var typeLeaveJoin = typeLeave.find(data => {\n    return data.id === appoveLeave_typeLeavejoin.toString();\n  });\n  var testt = [{ ...typeLeaveJoin\n  }]; //หาค่ายูเซอร์\n\n  const te = appoveLeave.map(data => {\n    return data.user_id;\n  });\n  const userValue = user.find(data => data.uid === te[0]);\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    onClick: () => {\n      console.log(te);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    onClick: () => {\n      console.log(userValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, testt.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 81\n    }\n  }, data.type_leave_name))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, testt.map(data => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 34\n    }\n  }, data.type_leave_name))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 49\n    }\n  }, data.leave_start))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 49\n    }\n  }, data.amount))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-pill badge-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, appove.status)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\")));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js"],"names":["React","useState","useEffect","firestore","Leavelist","props","appove","setAppove","leave","setLeave","user","setUser","typeLeave","setTypeLeave","refLeave","collection","refUser","refTypeLeave","data","status","onSnapshot","doc","tempArrayLeave","forEach","amount","leave_date","leave_start","reson","type_leave_id","uid","id","user_id","tempArrayUser","email","fname","lname","phone","user_group","tempArrayTypeLeave","type_leave_name","appoveLeave","filter","leave_id","appoveLeave_typeLeavejoin","map","typeLeaveJoin","find","toString","testt","te","userValue","console","log","index"],"mappings":"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","sourcesContent":[" import React,{useState,useEffect} from 'react'\nimport {firestore} from '../../../firebase/config'\nexport default function Leavelist(props) {\n    const [appove,setAppove]=useState([])\n    const [leave,setLeave]=useState([])\n    const [user,setUser]=useState([])\n    const [typeLeave,setTypeLeave]=useState([])\n    const refLeave = firestore.collection(\"leave\")\n    const refUser = firestore.collection(\"user\")\n    const refTypeLeave = firestore.collection(\"type_leave\")\n    useEffect(() => {\n        setAppove(props.data)\n        if(props.data.status===\"\"){\n            setAppove({...props.data,status:\"รออนุมัติ\"})\n        }\n        refLeave.onSnapshot(doc=>{ //ดึงLeave ทั้งหมด\n            let tempArrayLeave=[]\n            doc.forEach(data=>{\n                tempArrayLeave=[\n                    ...tempArrayLeave,\n                    {\n                        amount:data.data().amount,\n                        leave_date:data.data().leave_date,\n                        leave_start:data.data().leave_start,\n                        reson:data.data().reson,\n                        type_leave_id:data.data().type_leave_id,\n                        uid:data.id,   //ไอดีของ leave\n                        user_id:data.data().uid // ไอดีของ user\n                    }\n                ]\n            })\n            setLeave(tempArrayLeave)\n        })\n\n        refUser.onSnapshot(doc=>{ // ดึงยูเซอร์ทั้งหมด\n            let tempArrayUser=[]\n            doc.forEach(data=>{\n                tempArrayUser=[\n                    ...tempArrayUser,\n                    {\n                        email:data.data().email,\n                        fname:data.data().fname,\n                        lname:data.data().lname,\n                        phone:data.data().phone,\n                        uid:data.data().uid,\n                        user_group:data.data().user_group\n                    }\n                ]\n            })\n            setUser(tempArrayUser)\n        })\n\n        refTypeLeave.onSnapshot(doc=>{ //ดึง TypeLeave ทั้งหมด\n            let tempArrayTypeLeave =[]\n            doc.forEach(data=>{\n                tempArrayTypeLeave =[\n                    ...tempArrayTypeLeave,\n                    {\n                        type_leave_name:data.data().type_leave_name,\n                        id:data.id\n                    }\n                ]\n            })\n            setTypeLeave(tempArrayTypeLeave)\n        })\n        ///////////ทำต่อตรงนี้\n\n        return () => {\n            \n        }\n    }, [])\n    \n    var appoveLeave =leave.filter(data=>(data.uid===appove.leave_id))\n    var appoveLeave_typeLeavejoin = appoveLeave.map(data=>{\n        return data.type_leave_id\n    })\n    var typeLeaveJoin = typeLeave.find(data=>{\n        return data.id===appoveLeave_typeLeavejoin.toString()\n    })\n    var testt = [{...typeLeaveJoin}]\n\n\n    //หาค่ายูเซอร์\n    const te = appoveLeave.map((data=>{\n        return data.user_id\n    }))\n    const userValue = user.find(data=>(data.uid===te[0]))\n    return (\n        <tr>\n            <th scope=\"row\" onClick={()=>{console.log(te)}}></th>\n            <td onClick={()=>{console.log(userValue)}}>{testt.map((data,index)=><div key={index}>{data.type_leave_name}</div>)}</td>\n            <td>{testt.map(data=><div>{data.type_leave_name}</div>)}</td>\n            <td>{appoveLeave.map((data,index)=>(<div key={index}>{data.leave_start}</div>))}</td>\n            <td>{appoveLeave.map((data,index)=>(<div key={index}>{data.amount}</div>))}</td>\n            <td>\n                <span className=\"badge badge-pill badge-dark\">{appove.status}</span>\n            </td>\n            <td>\n                <button className=\"btn btn-sm btn-outline-danger\">การอนุมัติ</button>\n            </td>\n        </tr>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}