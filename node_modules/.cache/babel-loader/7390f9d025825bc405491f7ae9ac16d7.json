{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js\";\nimport React, { useState, useEffect } from 'react';\nimport { firestore } from '../../../firebase/config';\nexport default function Leavelist(props) {\n  const [appove, setAppove] = useState([]);\n  const [leave, setLeave] = useState([]);\n  const [user, setUser] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const refLeave = firestore.collection(\"leave\");\n  const refUser = firestore.collection(\"user\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n  useEffect(() => {\n    setAppove(props.data);\n\n    if (props.data.status === \"\") {\n      setAppove({ ...props.data,\n        status: \"รออนุมัติ\"\n      });\n    }\n\n    refLeave.onSnapshot(doc => {\n      //ดึงLeave ทั้งหมด\n      let tempArrayLeave = [];\n      doc.forEach(data => {\n        tempArrayLeave = [...tempArrayLeave, {\n          amount: data.data().amount,\n          leave_date: data.data().leave_date,\n          leave_start: data.data().leave_start,\n          reson: data.data().reson,\n          type_leave_id: data.data().type_leave_id,\n          uid: data.id\n        }];\n      });\n      setLeave(tempArrayLeave);\n    });\n    refUser.onSnapshot(doc => {\n      // ดึงยูเซอร์ทั้งหมด\n      let tempArrayUser = [];\n      doc.forEach(data => {\n        tempArrayUser = [...tempArrayUser, {\n          email: data.data().email,\n          fname: data.data().fname,\n          lname: data.data().lname,\n          phone: data.data().phone,\n          uid: data.data().uid,\n          user_group: data.data().user_group\n        }];\n      });\n      setUser(tempArrayUser);\n    });\n    refTypeLeave.onSnapshot(doc => {\n      //ดึง TypeLeave ทั้งหมด\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          type_leave_name: data.data().type_leave_name,\n          id: data.id\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    }); ///////////ทำต่อตรงนี้\n\n    return () => {};\n  }, []);\n  var appoveLeave = leave.filter(data => data.uid === appove.leave_id);\n  var appoveLeave_typeLeavejoin = appoveLeave.map(data => {\n    return data.type_leave_id;\n  });\n  var typeLeaveJoin = [typeLeave.find(data => {\n    return data.id === appoveLeave_typeLeavejoin.toString();\n  })];\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    onClick: () => {\n      console.log(appoveLeave_typeLeavejoin);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, typeLeaveJoin.map(data => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 110\n    }\n  }, data.id))), /*#__PURE__*/React.createElement(\"td\", {\n    onClick: () => {\n      console.log(typeLeaveJoin);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\", typeLeaveJoin['type_leave_name']), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 49\n    }\n  }, data.leave_start))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 49\n    }\n  }, data.amount))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-pill badge-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, appove.status)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, \"\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\")));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js"],"names":["React","useState","useEffect","firestore","Leavelist","props","appove","setAppove","leave","setLeave","user","setUser","typeLeave","setTypeLeave","refLeave","collection","refUser","refTypeLeave","data","status","onSnapshot","doc","tempArrayLeave","forEach","amount","leave_date","leave_start","reson","type_leave_id","uid","id","tempArrayUser","email","fname","lname","phone","user_group","tempArrayTypeLeave","type_leave_name","appoveLeave","filter","leave_id","appoveLeave_typeLeavejoin","map","typeLeaveJoin","find","toString","console","log","index"],"mappings":"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","sourcesContent":[" import React,{useState,useEffect} from 'react'\nimport {firestore} from '../../../firebase/config'\nexport default function Leavelist(props) {\n    const [appove,setAppove]=useState([])\n    const [leave,setLeave]=useState([])\n    const [user,setUser]=useState([])\n    const [typeLeave,setTypeLeave]=useState([])\n    const refLeave = firestore.collection(\"leave\")\n    const refUser = firestore.collection(\"user\")\n    const refTypeLeave = firestore.collection(\"type_leave\")\n    useEffect(() => {\n        setAppove(props.data)\n        if(props.data.status===\"\"){\n            setAppove({...props.data,status:\"รออนุมัติ\"})\n        }\n        refLeave.onSnapshot(doc=>{ //ดึงLeave ทั้งหมด\n            let tempArrayLeave=[]\n            doc.forEach(data=>{\n                tempArrayLeave=[\n                    ...tempArrayLeave,\n                    {\n                        amount:data.data().amount,\n                        leave_date:data.data().leave_date,\n                        leave_start:data.data().leave_start,\n                        reson:data.data().reson,\n                        type_leave_id:data.data().type_leave_id,\n                        uid:data.id\n                    }\n                ]\n            })\n            setLeave(tempArrayLeave)\n        })\n\n        refUser.onSnapshot(doc=>{ // ดึงยูเซอร์ทั้งหมด\n            let tempArrayUser=[]\n            doc.forEach(data=>{\n                tempArrayUser=[\n                    ...tempArrayUser,\n                    {\n                        email:data.data().email,\n                        fname:data.data().fname,\n                        lname:data.data().lname,\n                        phone:data.data().phone,\n                        uid:data.data().uid,\n                        user_group:data.data().user_group\n                    }\n                ]\n            })\n            setUser(tempArrayUser)\n        })\n\n        refTypeLeave.onSnapshot(doc=>{ //ดึง TypeLeave ทั้งหมด\n            let tempArrayTypeLeave =[]\n            doc.forEach(data=>{\n                tempArrayTypeLeave =[\n                    ...tempArrayTypeLeave,\n                    {\n                        type_leave_name:data.data().type_leave_name,\n                        id:data.id\n                    }\n                ]\n            })\n            setTypeLeave(tempArrayTypeLeave)\n        })\n        ///////////ทำต่อตรงนี้\n\n        return () => {\n            \n        }\n    }, [])\n    \n    var appoveLeave =leave.filter(data=>(data.uid===appove.leave_id))\n    var appoveLeave_typeLeavejoin = appoveLeave.map(data=>{\n        return data.type_leave_id\n    })\n    var typeLeaveJoin = [typeLeave.find(data=>{\n        return data.id===appoveLeave_typeLeavejoin.toString()\n    })]\n    return (\n        <tr>\n            <th scope=\"row\" onClick={()=>{console.log(appoveLeave_typeLeavejoin)}}>{typeLeaveJoin.map(data=>(<div>{data.id}</div>))}</th>\n            <td onClick={()=>{console.log(typeLeaveJoin)}}></td>\n            <td>ข้อมูลส่วนตัว{typeLeaveJoin['type_leave_name']}</td>\n            <td>{appoveLeave.map((data,index)=>(<div key={index}>{data.leave_start}</div>))}</td>\n            <td>{appoveLeave.map((data,index)=>(<div key={index}>{data.amount}</div>))}</td>\n            <td>\n                <span className=\"badge badge-pill badge-dark\">{appove.status}</span>\n            </td>\n            <td>\n                <button className=\"btn btn-sm btn-outline-danger\">การอนุมัติ</button>\n            </td>\n        </tr>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}