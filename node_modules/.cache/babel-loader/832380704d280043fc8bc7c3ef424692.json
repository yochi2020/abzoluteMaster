{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/user/Userleave.js\";\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/user/Sidebar';\nimport Checkuser from './Checkuser';\nimport Form from './Userleave/Form';\nimport { auth, firestore } from '../../firebase/config';\nimport $, { data } from 'jquery';\nimport { MDBDataTableV5 } from 'mdbreact';\n\nconst Userleave = () => {\n  const [leaveOfUser, setleaveOfUser] = useState([]);\n  const [appove, setAppove] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const refAppove = firestore.collection(\"appove\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n  const [datatable, setDatatable] = React.useState({\n    columns: [{\n      label: 'วันที่แจ้ง',\n      field: 'leave_date',\n      width: 150,\n      attributes: {\n        'aria-controls': 'DataTable',\n        'aria-label': 'Name'\n      }\n    }, {\n      label: 'วันที่ลา',\n      field: 'leave_start',\n      width: 270\n    }, {\n      label: 'จำนวนวัน',\n      field: 'amount',\n      width: 200\n    }, {\n      label: 'ประเภทการลา',\n      field: 'type_leave_name',\n      sort: 'asc',\n      width: 100\n    }, {\n      label: 'เหตุผล',\n      field: 'reson',\n      sort: 'disabled',\n      width: 150\n    }, {\n      label: 'สถานะ',\n      field: 'status',\n      sort: 'disabled',\n      width: 100\n    }]\n  });\n  useEffect(() => {\n    const unSubscribeLeaveOfUser = auth.onAuthStateChanged(firebase => {\n      if (!!firebase) {\n        const ref_leave = firestore.collection(\"leave\").where(\"uid\", \"==\", firebase.uid);\n        ref_leave.onSnapshot(doc_leave => {\n          let tempDataArray_leave = [];\n          doc_leave.forEach(data_leave => {\n            tempDataArray_leave = [...tempDataArray_leave, {\n              leave_date: data_leave.data().leave_date,\n              leave_start: data_leave.data().leave_start,\n              reson: data_leave.data().reson,\n              type_leave_id: data_leave.data().type_leave_id,\n              amount: data_leave.data().amount,\n              leave_id: data_leave.id,\n              uid: data_leave.data().uid\n            }];\n          });\n          setleaveOfUser(() => tempDataArray_leave);\n          setLoading(false);\n        });\n      }\n    });\n    const unSubscribeAppove = refAppove.onSnapshot(doc => {\n      let tempArrayAppove = [];\n      doc.forEach(data => {\n        tempArrayAppove = [...tempArrayAppove, {\n          appoveId: data.id,\n          hr_appove: data.data().hr_appove,\n          hr_remark: data.data().hr_remark,\n          leave_appove: data.data().leave_appove,\n          leave_remark: data.data().leave_remark,\n          leave_id: data.data().leave_id,\n          status: data.data().status\n        }];\n      });\n      setAppove(() => tempArrayAppove);\n    });\n    const unSubscribeTypeLeave = refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          type_leave_id: data.id,\n          type_leave_name: data.data().type_leave_name\n        }];\n      });\n      setTypeLeave(() => tempArrayTypeLeave);\n    });\n    return () => {\n      unSubscribeLeaveOfUser();\n      unSubscribeAppove();\n    };\n  }, []);\n  setDatatable({ ...datatable,\n    rows: \"\"\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkuser, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark\",\n    onClick: () => {\n      console.log(datatable);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 23\n    }\n  }, \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E25\\u0E32\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    data: datatable,\n    entriesOptions: [5, 20, 25],\n    entries: 5,\n    pagesAmount: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"thead-dark \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 27\n    }\n  }, \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E41\\u0E08\\u0E49\\u0E07\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 27\n    }\n  }, \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E25\\u0E32\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 27\n    }\n  }, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E27\\u0E31\\u0E19\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 27\n    }\n  }, \"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E01\\u0E32\\u0E23\\u0E25\\u0E32\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 27\n    }\n  }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 27\n    }\n  }, \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 27\n    }\n  }, \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 23\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 35\n    }\n  }))) : null))))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Userleave;","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/user/Userleave.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkuser","Form","auth","firestore","$","data","MDBDataTableV5","Userleave","leaveOfUser","setleaveOfUser","appove","setAppove","typeLeave","setTypeLeave","loading","setLoading","refAppove","collection","refTypeLeave","datatable","setDatatable","columns","label","field","width","attributes","sort","unSubscribeLeaveOfUser","onAuthStateChanged","firebase","ref_leave","where","uid","onSnapshot","doc_leave","tempDataArray_leave","forEach","data_leave","leave_date","leave_start","reson","type_leave_id","amount","leave_id","id","unSubscribeAppove","doc","tempArrayAppove","appoveId","hr_appove","hr_remark","leave_appove","leave_remark","status","unSubscribeTypeLeave","tempArrayTypeLeave","type_leave_name","rows","console","log","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/user/Sidebar';\nimport Checkuser from './Checkuser';\nimport Form from './Userleave/Form';\nimport { auth, firestore } from '../../firebase/config'\nimport $, { data } from 'jquery'\nimport {MDBDataTableV5} from 'mdbreact'\nconst Userleave = () => {\n  const [leaveOfUser, setleaveOfUser] = useState([]) \n  const [appove,setAppove]=useState([])\n  const [typeLeave,setTypeLeave]=useState([])\n  const [loading, setLoading] = useState(true)\n\n\n  const refAppove = firestore.collection(\"appove\")\n  const refTypeLeave = firestore.collection(\"type_leave\")\n\n  const [datatable, setDatatable] = React.useState({\n    columns: [\n      {\n        label: 'วันที่แจ้ง',\n        field: 'leave_date',\n        width: 150,\n        attributes: {\n          'aria-controls': 'DataTable',\n          'aria-label': 'Name',\n        },\n      },\n      {\n        label: 'วันที่ลา',\n        field: 'leave_start',\n        width: 270,\n      },\n      {\n        label: 'จำนวนวัน',\n        field: 'amount',\n        width: 200,\n      },\n      {\n        label: 'ประเภทการลา',\n        field: 'type_leave_name',\n        sort: 'asc',\n        width: 100,\n      },\n      {\n        label: 'เหตุผล',\n        field: 'reson',\n        sort: 'disabled',\n        width: 150,\n      },\n      {\n        label: 'สถานะ',\n        field: 'status',\n        sort: 'disabled',\n        width: 100,\n      }\n    ],})\n\n  useEffect(() => {\n    const unSubscribeLeaveOfUser = auth.onAuthStateChanged((firebase) => {\n      if (!!firebase) {\n        const ref_leave = firestore.collection(\"leave\").where(\"uid\", \"==\", firebase.uid)\n        ref_leave.onSnapshot(doc_leave => {\n          let tempDataArray_leave = [];\n          doc_leave.forEach(data_leave => {\n            tempDataArray_leave = [\n              ...tempDataArray_leave,\n              {\n              leave_date:data_leave.data().leave_date,\n              leave_start:data_leave.data().leave_start,\n              reson:data_leave.data().reson,\n              type_leave_id:data_leave.data().type_leave_id,\n              amount:data_leave.data().amount,\n              leave_id:data_leave.id,\n              uid:data_leave.data().uid\n              }\n            ]\n          })\n          setleaveOfUser(()=>tempDataArray_leave)\n          setLoading(false)\n        })\n      }\n    })\n\n    const unSubscribeAppove = refAppove.onSnapshot(doc=>{\n      let tempArrayAppove = []\n      doc.forEach(data=>{\n        tempArrayAppove=[\n          ...tempArrayAppove,\n          {\n            appoveId:data.id,\n            hr_appove:data.data().hr_appove,\n            hr_remark:data.data().hr_remark,\n            leave_appove:data.data().leave_appove,\n            leave_remark:data.data().leave_remark,\n            leave_id:data.data().leave_id,\n            status:data.data().status\n          }\n        ]\n      })\n      setAppove(()=>tempArrayAppove)\n    })\n\n    const unSubscribeTypeLeave = refTypeLeave.onSnapshot(doc=>{\n      let tempArrayTypeLeave = []\n      doc.forEach(data=>{\n        tempArrayTypeLeave=[\n          ...tempArrayTypeLeave,\n          {\n            type_leave_id:data.id,\n            type_leave_name:data.data().type_leave_name\n          }\n        ]\n      })\n      setTypeLeave(()=>tempArrayTypeLeave)\n    })\n    return () => {\n      unSubscribeLeaveOfUser()\n      unSubscribeAppove()\n    }\n  },[])\n  setDatatable({...datatable,rows:\"\"})\n\n  return (\n    <div>\n      <Checkuser />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\">\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark\" onClick={()=>{console.log(datatable)}} >รายการลา</h3>\n                      <Form />\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                  <MDBDataTableV5 data={datatable} entriesOptions={[5, 20, 25]} entries={5} pagesAmount={4}/>\n                    <table className=\"table table-hover \">\n                      <thead className=\"thead-dark \">\n                        <tr>\n                          <th scope=\"col\">วันที่แจ้ง</th>\n                          <th scope=\"col\">วันที่ลา</th>\n                          <th scope=\"col\">จำนวนวัน</th>\n                          <th scope=\"col\">ประเภทการลา</th>\n                          <th scope=\"col\">หมายเหตุ</th>\n                          <th scope=\"col\">สถานะ</th>\n                          <th scope=\"col\">จัดการ</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                      \n                      </tbody>\n                      <tbody>\n                      {\n                        loading ?(\n                            <tr>\n                              <td></td>\n                              <td></td>\n                              <td></td>\n                              <td><div className=\"spinner-border mx-auto\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n                            </div></td>\n                            </tr>\n                         \n                        )\n                        : null\n                      }\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n    </div >\n  );\n};\n\nexport default Userleave;"]},"metadata":{},"sourceType":"module"}