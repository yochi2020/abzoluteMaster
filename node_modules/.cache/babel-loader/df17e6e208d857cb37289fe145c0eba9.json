{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist.js\";\nimport React, { useState, useEffect } from 'react';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Footer from '../../component/admin/Footer';\nimport Checkadmin from './Checkadmin';\nimport { firestore, auth } from '../../firebase/config';\nimport Leavelist from './Leavelist/Leavelist';\nimport axios from 'axios';\n\nconst Admin = () => {\n  const [appove, setAppove] = useState([]);\n  const refAppove = firestore.collection(\"appove\");\n  const user = firestore.collection(\"user\");\n  const [reson, setReson] = useState(); //reson_notAllowed\n\n  useEffect(() => {\n    console.log(\"test\");\n    refAppove.onSnapshot(data => {\n      let tempArray = [];\n      data.forEach(data => {\n        tempArray = [...tempArray, {\n          hr_appove: data.data().hr_appove,\n          hr_remark: data.data().hr_remark,\n          leave_appove: data.data().leave_appove,\n          leave_remark: data.data().leave_remark,\n          leave_id: data.data().leave_id,\n          status: data.data().status,\n          id_appove: data.id\n        }];\n      });\n      setAppove(tempArray);\n    });\n  }, []);\n\n  const allow = obj => {\n    user.doc(auth.currentUser.uid).onSnapshot(doc_user => {\n      if (doc_user.data().user_group === 'hr') {\n        refAppove.doc(obj.id_appove).set({ ...obj,\n          hr_appove: \"อนุมัติ\"\n        });\n\n        if (obj.leave_appove === 'อนุมัติ') {\n          refAppove.doc(obj.id_appove).set({ ...obj,\n            status: \"y\"\n          });\n          axios.get(\"http://localhost:4000/allow/allow\").then(res => {\n            console.log(res);\n          }).catch(err => console.log(err));\n        }\n      } else if (doc_user.data().user_group === 'admin') {\n        refAppove.doc(obj.id_appove).set({ ...obj,\n          leave_appove: \"อนุมัติ\"\n        });\n\n        if (obj.hr_appove === 'อนุมัติ') {\n          refAppove.doc(obj.id_appove).set({ ...obj,\n            status: \"y\"\n          });\n          axios.get(\"http://localhost:4000/allow/allow\").then(res => {\n            console.log(res);\n          }).catch(err => console.log(err));\n        }\n      }\n    });\n  };\n\n  const notAllowed = obj => {// user.doc(auth.currentUser.uid).onSnapshot(doc_user => {\n    //   if (doc_user.data().user_group === 'hr') {\n    //     refAppove.doc(obj.id_appove).set({ ...obj, hr_appove: \"ไม่อนุมัติ\", status: \"no\" })\n    //   } else if (doc_user.data().user_group === 'admin') {\n    //     refAppove.doc(obj.id_appove).set({ ...obj, leave_appove: \"ไม่อนุมัติ\", status: \"no\" })\n    //   }\n    //   axios.get(\"http://localhost:4000/allow/notallowed\")\n    //     .then((res) => {\n    //       console.log(res)\n    //     }).catch(err => console.log(err))\n    // })\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkadmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark\",\n    onClick: () => {\n      console.log(appove);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 23\n    }\n  }, \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E25\\u0E32\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"thead-dark \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 27\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 27\n    }\n  }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 27\n    }\n  }, \"\\u0E01\\u0E32\\u0E23\\u0E25\\u0E32\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 27\n    }\n  }, \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E25\\u0E32\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 27\n    }\n  }, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E27\\u0E31\\u0E19\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 27\n    }\n  }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 27\n    }\n  }, \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 27\n    }\n  }, \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }\n  }, appove.map((data, index) => /*#__PURE__*/React.createElement(Leavelist, {\n    key: index,\n    data: data,\n    allow: () => {\n      allow(data);\n    },\n    notAllowed: () => notAllowed(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }))))))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal fade\",\n    id: \"staticBackdrop\",\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    tabindex: \"-1\",\n    \"aria-labelledby\": \"staticBackdropLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-dialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    class: \"modal-title\",\n    id: \"staticBackdropLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    value: reson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, \"\\u0E15\\u0E01\\u0E25\\u0E07\"))))));\n};\n\nexport default Admin;","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist.js"],"names":["React","useState","useEffect","Navbar","Sidebar","Footer","Checkadmin","firestore","auth","Leavelist","axios","Admin","appove","setAppove","refAppove","collection","user","reson","setReson","console","log","onSnapshot","data","tempArray","forEach","hr_appove","hr_remark","leave_appove","leave_remark","leave_id","status","id_appove","id","allow","obj","doc","currentUser","uid","doc_user","user_group","set","get","then","res","catch","err","notAllowed","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Navbar from '../../component/admin/Navbar'\nimport Sidebar from '../../component/admin/Sidebar'\nimport Footer from '../../component/admin/Footer'\nimport Checkadmin from './Checkadmin';\nimport { firestore, auth } from '../../firebase/config'\nimport Leavelist from './Leavelist/Leavelist';\nimport axios from 'axios'\nconst Admin = () => {\n  const [appove, setAppove] = useState([])\n  const refAppove = firestore.collection(\"appove\")\n  const user = firestore.collection(\"user\")\n  const [reson,setReson]=useState() //reson_notAllowed\n  useEffect(() => {\n    console.log(\"test\")\n    refAppove.onSnapshot(data => {\n      let tempArray = []\n      data.forEach(data => {\n        tempArray = [\n          ...tempArray,\n          {\n            hr_appove: data.data().hr_appove,\n            hr_remark: data.data().hr_remark,\n            leave_appove: data.data().leave_appove,\n            leave_remark: data.data().leave_remark,\n            leave_id: data.data().leave_id,\n            status: data.data().status,\n            id_appove: data.id\n          }\n        ]\n      })\n      setAppove(tempArray)\n    })\n  }, [])\n\n  const allow = (obj) => {\n    user.doc(auth.currentUser.uid).onSnapshot(doc_user => {\n      if (doc_user.data().user_group === 'hr') {\n        refAppove.doc(obj.id_appove).set({ ...obj, hr_appove: \"อนุมัติ\" })\n        if (obj.leave_appove === 'อนุมัติ') {\n          refAppove.doc(obj.id_appove).set({ ...obj, status: \"y\" })\n          axios.get(\"http://localhost:4000/allow/allow\")\n            .then((res) => {\n              console.log(res)\n            }).catch(err => console.log(err))\n        }\n      } else if (doc_user.data().user_group === 'admin') {\n        refAppove.doc(obj.id_appove).set({ ...obj, leave_appove: \"อนุมัติ\" })\n        if (obj.hr_appove === 'อนุมัติ') {\n          refAppove.doc(obj.id_appove).set({ ...obj, status: \"y\" })\n          axios.get(\"http://localhost:4000/allow/allow\")\n            .then((res) => {\n              console.log(res)\n            }).catch(err => console.log(err))\n        }\n      }\n    })\n\n\n  }\n  const notAllowed = (obj) => {\n    // user.doc(auth.currentUser.uid).onSnapshot(doc_user => {\n    //   if (doc_user.data().user_group === 'hr') {\n    //     refAppove.doc(obj.id_appove).set({ ...obj, hr_appove: \"ไม่อนุมัติ\", status: \"no\" })\n    //   } else if (doc_user.data().user_group === 'admin') {\n    //     refAppove.doc(obj.id_appove).set({ ...obj, leave_appove: \"ไม่อนุมัติ\", status: \"no\" })\n    //   }\n    //   axios.get(\"http://localhost:4000/allow/notallowed\")\n    //     .then((res) => {\n    //       console.log(res)\n    //     }).catch(err => console.log(err))\n    // })\n\n  }\n  return (\n    <div>\n      <Checkadmin />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\">\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark\" onClick={() => { console.log(appove) }}>รายการลา</h3>\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n\n                    <table className=\"table table-hover \">\n                      <thead className=\"thead-dark \">\n                        <tr>\n                          <th scope=\"col\">ชื่อพนักงาน</th>\n                          <th scope=\"col\">ข้อมูลส่วนตัว</th>\n                          <th scope=\"col\">การลา</th>\n                          <th scope=\"col\">วันที่ลา</th>\n                          <th scope=\"col\">จำนวนวัน</th>\n                          <th scope=\"col\">หมายเหตุ</th>\n                          <th scope=\"col\">สถานะ</th>\n                          <th scope=\"col\">จัดการ</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {\n                          appove.map((data, index) => (\n\n                            <Leavelist key={index} data={data} allow={() => { allow(data) }} notAllowed={() => notAllowed(data)} />\n\n\n                          ))\n                        }\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n      <div class=\"modal fade\" id=\"staticBackdrop\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n                    <div class=\"modal-dialog\">\n                        <div class=\"modal-content\">\n                            <div class=\"modal-header\">\n                                <h5 class=\"modal-title\" id=\"staticBackdropLabel\">หมายเหตุ</h5>\n                                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                    <span aria-hidden=\"true\">&times;</span>\n                                </button>\n                            </div>\n                            <div class=\"modal-body\">\n                                <input className=\"form-control\" value={reson}/>\n                            </div>\n                            <div class=\"modal-footer\">\n                                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">ยกเลิก</button>\n                                <button type=\"button\" class=\"btn btn-primary\">ตกลง</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n      \n    </div>\n  );\n};\n\nexport default Admin;"]},"metadata":{},"sourceType":"module"}