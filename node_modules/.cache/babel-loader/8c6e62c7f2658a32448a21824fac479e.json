{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js\";\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport Userlist from './Employee/Employee';\nimport { firestore } from '../../firebase/config';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport { MDBDataTableV5, MDBBtn } from 'mdbreact';\n\nfunction Employee() {\n  const ref = firestore.collection(\"user\");\n  const [user, setUser] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [datatable, setDatatable] = useState({\n    columns: [{\n      label: 'ชื่อพนักงาน',\n      field: 'email',\n      width: 150,\n      attributes: {\n        'aria-controls': 'DataTable',\n        'aria-label': 'Name'\n      }\n    }, {\n      label: 'ชื่อเล่น',\n      field: 'fname',\n      width: 270\n    }, {\n      label: 'ข้อมูลส่วนตัว',\n      field: 'office',\n      width: 200\n    }, {\n      label: 'จัดการ',\n      field: 'age',\n      sort: 'asc',\n      width: 100\n    }]\n  });\n  useEffect(() => {\n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let tempDataArray = [];\n      snapshot.forEach(doc => {\n        tempDataArray = [...tempDataArray, {\n          email: doc.data().email,\n          fname: doc.data().fname,\n          lname: doc.data().lname,\n          name: doc.data().name,\n          phone: doc.data().phone,\n          uid: doc.id,\n          user_group: doc.data().user_group\n        }];\n      });\n      setUser(() => tempDataArray);\n      setLoading(false);\n      setDatatable({ ...datatable,\n        rows: user\n      });\n    });\n    return () => {};\n  });\n\n  const deleteHandle = uid => {\n    let obj = {\n      uid\n    };\n    axios.post(\"http://localhost:4000/deleteuser\", obj).then(async uid => {\n      const refUser = firestore.collection(\"user\").doc(uid.data);\n      const refQuota = firestore.collection(\"quota\").where(uid, \"==\", uid.data);\n      await refUser.delete();\n      refQuota.get().delete().then(() => {\n        console.log(\"delete success\");\n      });\n    });\n  };\n\n  const test = () => {};\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkadmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark\",\n    onClick: () => console.log(datatable),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 23\n    }\n  }, \"\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    hover: true,\n    entriesOptions: [5, 20, 25],\n    entries: 5,\n    pagesAmount: 4,\n    data: datatable,\n    materialSearch: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }), \";\", /*#__PURE__*/React.createElement(\"table\", {\n    id: \"myTable\",\n    className: \"table table-hover \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"thead-dark \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    class: \"test\",\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 27\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 27\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E48\\u0E19\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 27\n    }\n  }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 27\n    }\n  }, \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 23\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 35\n    }\n  }))) : null))))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Employee;\n$(document).ready(() => {\n  $(\".test\").click(() => {\n    alert(\"ddd\");\n  });\n});","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkadmin","Form","Userlist","firestore","axios","$","MDBDataTableV5","MDBBtn","Employee","ref","collection","user","setUser","loading","setLoading","datatable","setDatatable","columns","label","field","width","attributes","sort","unsubscribe","onSnapshot","snapshot","tempDataArray","forEach","doc","email","data","fname","lname","name","phone","uid","id","user_group","rows","deleteHandle","obj","post","then","refUser","refQuota","where","delete","get","console","log","test","height","document","ready","click","alert"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport Userlist from './Employee/Employee'\nimport { firestore } from '../../firebase/config'\nimport axios from 'axios'\nimport $  from 'jquery'\nimport { MDBDataTableV5,MDBBtn } from 'mdbreact';\n\nfunction Employee() {\n  const ref = firestore.collection(\"user\");\n  const [user, setUser] = useState([])\n  const [loading, setLoading] = useState(true)\n  \n  const [datatable, setDatatable] = useState({\n    columns: [\n      {\n        label: 'ชื่อพนักงาน',\n        field: 'email',\n        width: 150,\n        attributes: {\n          'aria-controls': 'DataTable',\n          'aria-label': 'Name',\n        },\n      },\n      {\n        label: 'ชื่อเล่น',\n        field: 'fname',\n        width: 270,\n      },\n      {\n        label: 'ข้อมูลส่วนตัว',\n        field: 'office',\n        width: 200,\n      },\n      {\n        label: 'จัดการ',\n        field: 'age',\n        sort: 'asc',\n        width: 100,\n      }\n    ],\n    \n  });\n    \n  useEffect(() => {\n\n    \n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let tempDataArray = [];\n      snapshot.forEach(doc => {\n        tempDataArray = [\n          ...tempDataArray,\n          {\n            email: doc.data().email,\n            fname: doc.data().fname,\n            lname: doc.data().lname,\n            name: doc.data().name,\n            phone: doc.data().phone,\n            uid: doc.id,\n            user_group: doc.data().user_group\n          }\n        ];\n      })\n      setUser(()=>tempDataArray)\n      setLoading(false)\n      setDatatable({...datatable,rows:user})\n    })\n    return () => {\n    };\n  });\n\n\n  const deleteHandle = (uid) => {\n    let obj={\n      uid\n    }\n\n    axios.post(\"http://localhost:4000/deleteuser\",obj)\n    .then(async (uid)=>{\n      const refUser = firestore.collection(\"user\").doc(uid.data)\n      const refQuota = firestore.collection(\"quota\").where(uid,\"==\",uid.data)\n      await refUser.delete()\n      refQuota.get().delete().then(()=>{\n        console.log(\"delete success\")\n      })\n    })\n  }\n\n\n  const test = ()=>{\n\n  }\n  return (\n    <div>\n      <Checkadmin />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\">\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark\" onClick={()=>console.log(datatable)}>พนักงาน</h3>\n                      <Form />\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                  <MDBDataTableV5 hover entriesOptions={[5, 20, 25]} entries={5} pagesAmount={4} data={datatable} materialSearch />;\n                    <table id=\"myTable\" className=\"table table-hover \">\n                      <thead className=\"thead-dark \">\n                        <tr>\n                          <th  class=\"test\"  scope=\"col\">ชื่อพนักงาน</th>\n                          <th scope=\"col\">ชื่อเล่น</th>\n                          <th scope=\"col\">ข้อมูลส่วนตัว</th>\n                          <th scope=\"col\">จัดการ</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {\n                          loading ? (\n                            <tr>\n                              <td></td>\n                              <td></td>\n                              <td><div className=\"spinner-border mx-auto\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n                              </div></td>\n                            </tr>\n                          ) : null\n                        }\n                        {/* {\n                          user.map((item, index) => (\n                            <Userlist key={index} data={item} delete={() => deleteHandle(item.uid)} />\n                          ))\n                        } */}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n    </div>\n  );\n}\n\nexport default Employee;\n\n$(document).ready(()=>{\n  $(\".test\").click(()=>{\n\n    alert(\"ddd\")\n  })\n})"]},"metadata":{},"sourceType":"module"}