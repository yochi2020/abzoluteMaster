{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { firestore } from '../../../firebase/config';\nexport default function Leavelist(props) {\n  const [appove, setAppove] = useState([]);\n  const [leave, setLeave] = useState([]);\n  const [user, setUser] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const refLeave = useRef(firestore.collection(\"leave\")).current;\n  const refUser = firestore.collection(\"user\");\n  const refTypeLeave = firestore.collection(\"type_leave\");\n  const [test, setTest] = useState([]);\n  useEffect(async () => {\n    setAppove(props.data);\n\n    if (props.data.status === \"\") {\n      setAppove({ ...props.data,\n        status: \"รออนุมัติ\"\n      });\n    }\n\n    refLeave.onSnapshot(doc => {\n      //ดึงLeave ทั้งหมด\n      let tempArrayLeave = [];\n      doc.forEach(data => {\n        tempArrayLeave = [...tempArrayLeave, {\n          amount: data.data().amount,\n          leave_date: data.data().leave_date,\n          leave_start: data.data().leave_start,\n          reson: data.data().reson,\n          type_leave_id: data.data().type_leave_id,\n          uid: data.data().uid,\n          id_leave: data.id\n        }];\n      });\n      setLeave(tempArrayLeave);\n    });\n    refUser.onSnapshot(doc => {\n      // ดึงยูเซอร์ทั้งหมด\n      let tempArrayUser = [];\n      doc.forEach(data => {\n        tempArrayUser = [...tempArrayUser, {\n          email: data.data().email,\n          fname: data.data().fname,\n          lname: data.data().lname,\n          phone: data.data().phone,\n          uid: data.data().uid,\n          user_group: data.data().user_group\n        }];\n      });\n      setUser(tempArrayUser);\n    });\n    refTypeLeave.onSnapshot(doc => {\n      //ดึง TypeLeave ทั้งหมด\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          type_leave_name: data.data().type_leave_name,\n          id: data.id\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    });\n    const getLeave = leave.find(data => data.id_leave === props.data.leave_id);\n    setTest(getLeave);\n    return () => {};\n  }, []);\n  var appoveLeave = leave.filter(data => data.uid === appove.leave_id);\n  var appoveLeave_typeLeavejoin = appoveLeave.map(data => {\n    return data.type_leave_id;\n  });\n  var typeLeaveJoin = [typeLeave.find(async data => {\n    return data.id === appoveLeave_typeLeavejoin[0];\n  })];\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"row\",\n    onClick: () => {\n      console.log(props.data);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    onClick: () => {\n      console.log(typeLeaveJoin);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"sss\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\", typeLeaveJoin['type_leave_name']), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 52\n    }\n  }, data.leave_start))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, appoveLeave.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 52\n    }\n  }, data.amount))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-pill badge-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, appove.status)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\")));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute-master/src/page/admin/Leavelist/Leavelist.js"],"names":["React","useState","useEffect","useRef","firestore","Leavelist","props","appove","setAppove","leave","setLeave","user","setUser","typeLeave","setTypeLeave","refLeave","collection","current","refUser","refTypeLeave","test","setTest","data","status","onSnapshot","doc","tempArrayLeave","forEach","amount","leave_date","leave_start","reson","type_leave_id","uid","id_leave","id","tempArrayUser","email","fname","lname","phone","user_group","tempArrayTypeLeave","type_leave_name","getLeave","find","leave_id","appoveLeave","filter","appoveLeave_typeLeavejoin","map","typeLeaveJoin","console","log","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect ,useRef} from 'react'\nimport { firestore } from '../../../firebase/config'\nexport default function Leavelist(props) {\n    const [appove, setAppove] = useState([])\n    const [leave, setLeave] = useState([])\n    const [user, setUser] = useState([])\n    const [typeLeave, setTypeLeave] = useState([])\n    const refLeave = useRef(firestore.collection(\"leave\")).current\n    const refUser = firestore.collection(\"user\")\n    const refTypeLeave = firestore.collection(\"type_leave\")\n    const [test,setTest]=useState([])\n\n    useEffect(async () => {\n        setAppove(props.data)\n        if (props.data.status === \"\") {\n            setAppove({ ...props.data, status: \"รออนุมัติ\" })\n        }\n        refLeave.onSnapshot(doc => { //ดึงLeave ทั้งหมด\n            let tempArrayLeave = []\n            doc.forEach(data => {\n                tempArrayLeave = [\n                    ...tempArrayLeave,\n                    {\n                        amount: data.data().amount,\n                        leave_date: data.data().leave_date,\n                        leave_start: data.data().leave_start,\n                        reson: data.data().reson,\n                        type_leave_id: data.data().type_leave_id,\n                        uid: data.data().uid,\n                        id_leave:data.id\n                        \n                    }\n                ]\n            })\n            setLeave(tempArrayLeave)\n        })\n\n        refUser.onSnapshot(doc => { // ดึงยูเซอร์ทั้งหมด\n            let tempArrayUser = []\n            doc.forEach(data => {\n                tempArrayUser = [\n                    ...tempArrayUser,\n                    {\n                        email: data.data().email,\n                        fname: data.data().fname,\n                        lname: data.data().lname,\n                        phone: data.data().phone,\n                        uid: data.data().uid,\n                        user_group: data.data().user_group\n                    }\n                ]\n            })\n            setUser(tempArrayUser)\n        })\n\n        refTypeLeave.onSnapshot(doc => { //ดึง TypeLeave ทั้งหมด\n            let tempArrayTypeLeave = []\n            doc.forEach(data => {\n                tempArrayTypeLeave = [\n                    ...tempArrayTypeLeave,\n                    {\n                        type_leave_name: data.data().type_leave_name,\n                        id: data.id\n                    }\n                ]\n            })\n            setTypeLeave(tempArrayTypeLeave)\n        })\n        \n        const getLeave =   leave.find(data=>(\n            data.id_leave===props.data.leave_id\n        )) \n\n        setTest(getLeave)\n        return () => {\n\n        }\n    } ,[])\n\n\n    \n    \n    var appoveLeave = leave.filter(data => (data.uid === appove.leave_id))\n    var appoveLeave_typeLeavejoin = appoveLeave.map(data => {\n        return data.type_leave_id\n    })\n    var typeLeaveJoin = [typeLeave.find(async data => {\n        return data.id ===  appoveLeave_typeLeavejoin[0]\n    })]\n\n    \n    return (\n        <tr>\n            <th scope=\"row\" onClick={() => { console.log(props.data) }}></th>\n            <td onClick={() => { console.log(typeLeaveJoin) }}>sss</td>\n            <td>ข้อมูลส่วนตัว{typeLeaveJoin['type_leave_name']}</td>\n            <td>{appoveLeave.map((data, index) => (<div key={index}>{data.leave_start}</div>))}</td>\n            <td>{appoveLeave.map((data, index) => (<div key={index}>{data.amount}</div>))}</td>\n            <td>\n                <span className=\"badge badge-pill badge-dark\">{appove.status}</span>\n            </td>\n            <td>\n                <button className=\"btn btn-sm btn-outline-danger\">การอนุมัติ</button>\n            </td>\n        </tr>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}