{"ast":null,"code":"var _jsxFileName = \"/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js\";\n// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n//   });\n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n//     if(testt>=1){\n//     }else{\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n//     })\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n//   const editHandle = (data)=>{\n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n//   }\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n//   const countAmount =(e,data)=>{\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n//   }\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n//     console.log(editUser)\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config';\nimport axios from 'axios';\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState([]);\n  const [typeLeave, setTypeLeave] = useState([]);\n  const [quotaOfUser, setQuotaOfUser] = useState([]);\n  const refUser = firestore.collection(\"user\");\n  const refQuota = firestore.collection(\"quota\");\n  const refLeave = firestore.collection(\"leave\");\n  const refTypeLeave = firestore.collection('type_leave');\n  const refAppove = firestore.collection(\"appove\");\n  const [datatable, setDatatable] = useState({\n    columns: [{\n      label: 'ชื่อพนักงาน',\n      field: 'name',\n      width: 200,\n      attributes: {\n        'aria-controls': 'DataTable',\n        'aria-label': 'Name'\n      }\n    }, {\n      label: 'อีเมล',\n      field: 'email',\n      width: 200\n    }, {\n      label: 'เบอร์โทร',\n      field: 'phone',\n      width: 200\n    }, {\n      label: 'แก้ไข',\n      field: 'edit',\n      sort: 'asc',\n      width: 5\n    }, {\n      label: 'ลบ',\n      field: 'delete',\n      sort: 'asc',\n      width: 5\n    }]\n  });\n\n  const deleteHandle = id => {\n    refLeave.where(\"uid\", \"==\", id).onSnapshot(doc => {\n      let tempArrayLeaveOfUser = [];\n      doc.forEach(data => {\n        tempArrayLeaveOfUser = [...tempArrayLeaveOfUser, {\n          leaveId: data.id,\n          reason: data.data().reson\n        }];\n      });\n      tempArrayLeaveOfUser.forEach(dataLeaveOfUser => {\n        refAppove.where(\"leave_id\", \"==\", dataLeaveOfUser.leaveId).onSnapshot(doc => {\n          doc.forEach(data => {\n            refAppove.doc(data.id).delete();\n          });\n        });\n        refLeave.doc(dataLeaveOfUser.leaveId).delete();\n      });\n      refQuota.where(\"uid\", \"==\", id).onSnapshot(doc => {\n        doc.forEach(data => {\n          refQuota.doc(data.id).delete();\n        });\n      });\n      refUser.doc(id).delete();\n    }); // delete user\n\n    axios.post(\"http://localhost:4000/deleteuser\", {\n      id\n    }).then(() => {\n      console.log(\"Delete User Success\");\n      setLoading(true);\n    });\n  };\n\n  const clickEditHandle = (data, uid) => {\n    refQuota.where(\"uid\", \"==\", uid).onSnapshot(doc => {\n      let tempArrayQuotaUser = [];\n      doc.forEach(data => {\n        tempArrayQuotaUser = [...tempArrayQuotaUser, {\n          quotaId: data.id,\n          type_leave_id: data.data().type_leave_id,\n          amount: data.data().amount,\n          uid: data.data().uid\n        }];\n      }); // tempArrayQuotaUser.forEach((dataQuotaOfUser,index)=>{\n      //   typeLeave.forEach(dataTypeLeave=>{\n      //     console.log(\"sasafasfasffa\")\n      //     if(dataTypeLeave.typeLeaveId===dataQuotaOfUser.type_leave_id){\n      //       tempArrayQuotaUser[index]=[\n      //         tempArrayQuotaUser[index],\n      //         {\n      //           type_leave_name:dataTypeLeave.type_leave_name\n      //         }\n      //       ]\n      //     }\n      //   })\n      // })\n\n      setQuotaOfUser(tempArrayQuotaUser);\n    });\n  };\n\n  useEffect(() => {\n    refTypeLeave.onSnapshot(doc => {\n      let tempArrayTypeLeave = [];\n      doc.forEach(data => {\n        tempArrayTypeLeave = [...tempArrayTypeLeave, {\n          typeLeaveId: data.id,\n          type_leave_name: data.data().type_leave_name\n        }];\n      });\n      setTypeLeave(tempArrayTypeLeave);\n    });\n    refUser.onSnapshot(doc => {\n      let tempArrayUser = [];\n      doc.forEach(data => {\n        tempArrayUser = [...tempArrayUser, {\n          email: data.data().email,\n          fname: data.data().fname,\n          lname: data.data().lname,\n          name: data.data().name,\n          phone: data.data().phone,\n          uid: data.id,\n          user_group: data.data().user_group,\n          edit: /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-sm btn-outline-success \",\n            \"data-toggle\": \"modal\",\n            \"data-target\": \"#staticBackdrop2\",\n            onClick: () => {\n              clickEditHandle(data.data(), data.id);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 18\n            }\n          }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"),\n          delete: /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-sm btn-outline-danger\",\n            onClick: () => {\n              deleteHandle(data.id);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 20\n            }\n          }, \"\\u0E25\\u0E1A\")\n        }];\n      });\n      setUser(tempArrayUser);\n      setLoading(false);\n    });\n    setDatatable({ ...datatable,\n      rows: user\n    });\n    return () => {};\n  }, [loading]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Checkadmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 574,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    style: {\n      height: '670px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0 text-dark click\",\n    onClick: () => {\n      console.log(typeLeave);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 23\n    }\n  }, \"\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 19\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border mx-auto mr-4\",\n    style: {\n      width: \"3rem\",\n      height: \"3rem\"\n    },\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(MDBDataTableV5, {\n    hover: true,\n    entriesOptions: [5, 20, 25],\n    entries: 5,\n    pagesAmount: 4,\n    data: datatable,\n    searchTop: true,\n    searchBottom: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 27\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"control-sidebar control-sidebar-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"staticBackdrop2\",\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    tabIndex: \"-1\",\n    \"aria-labelledby\": \"staticBackdropLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"staticBackdropLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 10\n    }\n  }, \"Modal title\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    onClick: () => {\n      console.log(quotaOfUser);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 12\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    onClick: () => {\n      console.log();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 24\n    }\n  }, \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E4C\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 24\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E48\\u0E19\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 24\n    }\n  }, \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 22\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 24\n    }\n  }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E23\\u0E34\\u0E07\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 24\n    }\n  }, \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 24\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 20\n    }\n  }, quotaOfUser.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 29\n    }\n  }, typeLeave.map((dataTypeLeave, i) => {\n    if (dataTypeLeave.typeLeaveId === data.type_leave_id) {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 45\n        }\n      }, dataTypeLeave.type_leave_name);\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 31\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 10\n    }\n  }, \"\\u0E1B\\u0E34\\u0E14\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 10\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"))))));\n}","map":{"version":3,"sources":["/Users/chanaphatsuzuki/Desktop/programming/abzolute/src/page/admin/Employee.js"],"names":["React","useEffect","useState","Footer","Navbar","Sidebar","Checkadmin","Form","firestore","axios","MDBDataTableV5","Employee","loading","setLoading","user","setUser","typeLeave","setTypeLeave","quotaOfUser","setQuotaOfUser","refUser","collection","refQuota","refLeave","refTypeLeave","refAppove","datatable","setDatatable","columns","label","field","width","attributes","sort","deleteHandle","id","where","onSnapshot","doc","tempArrayLeaveOfUser","forEach","data","leaveId","reason","reson","dataLeaveOfUser","delete","post","then","console","log","clickEditHandle","uid","tempArrayQuotaUser","quotaId","type_leave_id","amount","tempArrayTypeLeave","typeLeaveId","type_leave_name","tempArrayUser","email","fname","lname","name","phone","user_group","edit","rows","height","map","index","dataTypeLeave","i"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAOA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA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","sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import Footer from '../../component/admin/Footer';\n// import Navbar from '../../component/admin/Navbar';\n// import Sidebar from '../../component/admin/Sidebar';\n// import Checkadmin from './Checkadmin';\n// import Form from './Employee/Form';\n// import { firestore } from '../../firebase/config'\n// import axios from 'axios'\n// import { MDBDataTableV5 } from 'mdbreact';\n// import $ from 'jquery'\n// function Employee() {\n\n//   const [user, setUser] = useState([])\n//   const [loading, setLoading] = useState(true)\n//   const [editQuota,setEditQuota]=useState([])\n//   const [editUser,setEditUser]=useState([])\n//   const [quota,setQuota]=useState([])  //store all quota\n//   const [quotaUser,setQuotaUser]=useState([])\n//   const [typeLeave,setTypeLeave]=useState([])  // store all type_leave \n//   const refUser = firestore.collection(\"user\");\n//   const refTypeLeave  = firestore.collection(\"type_leave\")\n//   const refQuota = firestore.collection(\"quota\")\n//   const [datatable, setDatatable] = useState({\n//     columns: [\n//       {\n//         label: 'ชื่อพนักงาน',\n//         field: 'name',\n//         width: 200,\n//         attributes: {\n//           'aria-controls': 'DataTable',\n//           'aria-label': 'Name',\n//         },\n//       },\n//       {\n//         label: 'อีเมล',\n//         field: 'email',\n//         width: 200,\n//       },\n//       {\n//         label: 'เบอร์โทร',\n//         field: 'phone',\n//         width: 200,\n//       },\n//       {\n//         label: 'แก้ไข',\n//         field: 'edit',\n//         sort: 'asc',\n//         width: 5,\n//       },\n//       {\n//         label: 'ลบ',\n//         field: 'delete',\n//         sort: 'asc',\n//         width: 5,\n//       }\n//     ],\n\n//   });\n\n\n\n//   const [testt,setTestt]=useState(0)\n//   setTimeout(()=>{\n\n//     if(testt>=1){\n\n//     }else{\n\n//      setTestt(testt+1)\n//     }\n//     $(\".click\").click()\n//   },1500)\n//   useEffect(() => {\n\n//     //pull data Quota\n//    const quotasubscrib= refQuota.onSnapshot(snapshot=>{\n//       let tempArrayQuota=[]\n//       snapshot.forEach(data=>{\n//         tempArrayQuota=[\n//           ...tempArrayQuota,\n//           {\n//             quota_id:data.id,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid,\n//             amount:data.data().amount\n//           }\n//         ]\n//       })\n//       setQuota(tempArrayQuota)\n//     })\n\n//     // pull data type_leave\n//     const typeleavesubscrib= refTypeLeave.onSnapshot(snapshot=>{\n//       let tempArrayTypeLeave=[]\n//       snapshot.forEach(dataa=>{\n//         tempArrayTypeLeave=[\n//           ...tempArrayTypeLeave,\n//           {\n//             type_leave_id:dataa.id,\n//             type_leave_name:dataa.data().type_leave_name\n//           }\n//         ]\n//       })\n//       setTypeLeave(tempArrayTypeLeave)\n//     })\n\n\n\n//     //pull data user\n//     const usersubscrib= refUser.onSnapshot(snapshot => {\n//       let tempDataArray = [];\n//       snapshot.forEach(doc => {\n//         tempDataArray = [\n//           ...tempDataArray,\n//           {\n//             name: doc.data().fname + doc.data().lname+\" \" +\"(\"+ doc.data().name+\")\",\n//             email: doc.data().email,\n//             phone:doc.data().phone,\n//             uid: doc.id,\n//             user_group: doc.data().user_group,\n//             edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{editHandle(doc.data())}}>แก้ไข</button>,\n//             delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(doc.id)}}>ลบ</button> \n//           }\n//         ];\n//       })\n//       setUser(()=>tempDataArray)\n//       setLoading(false)\n\n//     })\n\n\n//     setDatatable({...datatable,rows:user})\n//     let tempArrayFilterQuotaUser = quota.filter(data=>{\n//       return data.uid==editUser.uid\n//     })\n//     setQuotaUser(()=>tempArrayFilterQuotaUser)\n\n\n//     return () => {\n//       usersubscrib()\n//       quotasubscrib()\n//       typeleavesubscrib()\n//     };\n//   },[]);\n\n\n//   const deleteHandle = async (uid) => {\n//     setTestt(Math.random())\n//     let obj={\n//       uid\n//     }\n//     var leaveId = '';\n//     //delete leave of uerr\n//     await firestore.collection('leave').where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//         doc.forEach(data=>{\n//           firestore.collection(\"leave\").doc(data.id)\n//           .delete()\n//           leaveId=data.id\n//           firestore.collection(\"appove\").where('leave_id','==',data.id)\n//           .onSnapshot(doc=>{\n//             doc.forEach(d=>{\n//               firestore.collection(\"appove\").doc(d.id)\n//               .delete()\n//             })\n//           })\n\n//         })\n//         console.log(leaveId)\n//     })\n//     // delete quota of user\n//      await firestore.collection(\"quota\").where('uid','==',obj.uid)\n//     .onSnapshot(doc=>{\n//       doc.forEach(data=>{\n//         console.log(data.data())\n//         firestore.collection(\"quota\").doc(data.id)\n//         .delete()\n//       })\n//     })\n\n\n//     // delete user\n//     await axios.post(\"http://localhost:4000/deleteuser\",obj)\n//     .then( (uid)=>{\n//       const refUser = firestore.collection(\"user\").doc(uid.data)\n//        refUser.delete()\n//     })\n//   }\n\n\n//   const editHandle = (data)=>{\n\n//     clearHandle()\n//     firestore.collection(\"quota\").where('uid','==',data.uid)\n//     .onSnapshot(doc=>{\n//       let tempArrayquota =[]\n//       doc.forEach(data=>{\n//         tempArrayquota=[\n//           ...tempArrayquota,\n//           {\n//             amount:data.data().amount,\n//             type_leave_id:data.data().type_leave_id,\n//             uid:data.data().uid\n//           }\n//         ]\n//       })\n//       setEditQuota(tempArrayquota)\n//       setEditUser(data)\n//     })\n\n\n\n\n\n//   }\n\n\n\n\n\n\n//   //clear form edit\n//   const clearHandle =()=>{\n//     setTestt(Math.random())\n//     setEditUser([])\n//   }\n\n//   const countAmount =(e,data)=>{\n\n//     refQuota.doc(e.target.name)\n//     .set({\n//         amount:e.target.value,\n//         type_leave_id:data.type_leave_id,\n//         uid:data.uid\n//     })\n\n//   }\n\n\n//   const submitHandle =()=>{\n//     refUser.doc(editUser.uid)\n//     .set(editUser)\n\n//     console.log(editUser)\n\n//     setTestt(Math.random())\n//   }\n//   return (\n//     <div>\n//       <Checkadmin />\n//       <Navbar />\n//       <Sidebar />\n//       {/* Content Wrapper. Contains page content */}\n//       <div className=\"content-wrapper\">\n//         {/* Content Header (Page header) */}\n//         <div className=\"content-header\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row mb-2\">\n//             </div>{/* /.row */}\n//           </div>{/* /.container-fluid */}\n//         </div>\n//         {/* /.content-header */}\n//         {/* Main content */}\n//         <div className=\"content\">\n//           <div className=\"container-fluid\">\n//             <div className=\"row\">\n//               <div className=\"col-lg-12\" style={{height:'670px'}}>\n//                 <div className=\"card\">\n//                   <div className=\"card-header \">\n//                     <div className=\"d-flex justify-content-between\">\n//                       <h3 className=\"m-0 text-dark click\" onClick={()=>{setTestt(\"9\")}} >พนักงาน</h3>\n//                       <Form />\n//                     </div>\n//                   </div>\n//                   <div className=\"card-body table-responsive \">\n//                   {\n//                           loading ? (\n//                               <div className=\"spinner-border mx-auto mr-4\" style={{width:\"3rem\",height:\"3rem\"}} role=\"status\">\n//                               </div>\n\n\n//                  ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n\n//                 }\n//                   </div>\n//                 </div>\n//               </div>\n//               {/* /.col-md-6 */}\n//               {/* /.col-md-6 */}\n//             </div>\n//             {/* /.row */}\n//           </div>\n//           {/* /.container-fluid */}\n//         </div>\n//         {/* /.content */}\n//       </div>\n//       {/* /.content-wrapper */}\n//       {/* Control Sidebar */}\n//       <aside className=\"control-sidebar control-sidebar-dark\">\n//         {/* Control sidebar content goes here */}\n//       </aside>\n//       {/* /.control-sidebar */}\n//       <Footer />\n\n\n\n// {/* <!-- Modal of Edit user --> */}\n// <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n//   <div className=\"modal-dialog modal-xl\">\n//     <div className=\"modal-content\">\n//       <div className=\"modal-header\">\n//         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n//         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n//           <span aria-hidden=\"true\" onClick={()=>clearHandle}>&times;</span>\n//         </button>\n//       </div>\n//       <div className=\"modal-body\">\n//       <div className=\"container-fluid\">\n//                 <div className=\"row\">\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label onClick={()=>{console.log(quotaUser)}}>อีเมล์</label>\n//                       <input type=\"text\" className=\"form-control\" value={editUser.email} onChange={(e)=>setEditUser({...editUser,email:e.target.value})} ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>ชื่อเล่น</label>\n//                       <input type=\"text\" value={editUser.name} onChange={(e)=>setEditUser({...editUser,name:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>เบอร์โทรศัพ</label>\n//                       <input type=\"text\" value={editUser.phone} onChange={(e)=>setEditUser({...editUser,phone:e.target.value})} className=\"form-control\" ></input>\n//                     </div>\n//                   </div>\n//                   <div className=\"col-md-4\">\n//                     <div className=\"form-group\">\n//                       <label>ชื่อจริง</label>\n//                       <input type=\"text\" value={editUser.fname} onChange={(e)=>setEditUser({...editUser,fname:e.target.value})}  className=\"form-control\"  ></input>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <label>นามสกุล</label>\n//                       <input type=\"text\" value={editUser.lname} onChange={(e)=>setEditUser({...editUser,lname:e.target.value})}  className=\"form-control\"></input>\n//                     </div>\n\n//                   </div>\n//                   <div className=\"col-md-3\">\n//                         {\n//                           quotaUser.map((data,index)=>(\n//                             <div key={index} className=\"form-group\">\n\n//                               <label>\n//                               {\n//                                 typeLeave.map((dataTypeLeave,keyDataTypeLeave)=>(\n//                                   <div key={keyDataTypeLeave}>\n//                                     {\n//                                       dataTypeLeave.type_leave_id===data.type_leave_id?\n//                                       <div>{dataTypeLeave.type_leave_name}</div>\n//                                       :null\n//                                     }\n//                                   </div>\n//                                 ))\n\n//                               }\n//                               </label>\n//                               <input className=\"form-control\" type=\"number\" defaultValue={data.amount} min=\"0\"  name={data.quota_id}  onChange={(e)=>{countAmount(e,data)}}  />\n//                             </div>\n//                           ))\n//                         }\n//                   </div>\n//                 </div>\n//                 </div>\n//       </div>\n//       <div className=\"modal-footer\">\n//         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>clearHandle}>ปิด</button>\n//         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>submitHandle()}>บันทึก</button>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n//     </div>\n//   );\n// }\n// export default Employee;\n\n\n\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../component/admin/Footer';\nimport Navbar from '../../component/admin/Navbar';\nimport Sidebar from '../../component/admin/Sidebar';\nimport Checkadmin from './Checkadmin';\nimport Form from './Employee/Form';\nimport { firestore } from '../../firebase/config'\nimport axios from 'axios'\nimport { MDBDataTableV5 } from 'mdbreact';\nexport default function Employee() {\n  const [loading, setLoading] = useState(true)\n  const [user, setUser] = useState([])\n  const [typeLeave, setTypeLeave] = useState([])\n  const [quotaOfUser, setQuotaOfUser] = useState([])\n\n  const refUser = firestore.collection(\"user\")\n  const refQuota = firestore.collection(\"quota\")\n  const refLeave =firestore.collection(\"leave\")\n  const refTypeLeave = firestore.collection('type_leave')\n  const refAppove =firestore.collection(\"appove\")\n  const [datatable, setDatatable] = useState({\n    columns: [\n      {\n        label: 'ชื่อพนักงาน',\n        field: 'name',\n        width: 200,\n        attributes: {\n          'aria-controls': 'DataTable',\n          'aria-label': 'Name',\n        },\n      },\n      {\n        label: 'อีเมล',\n        field: 'email',\n        width: 200,\n      },\n      {\n        label: 'เบอร์โทร',\n        field: 'phone',\n        width: 200,\n      },\n      {\n        label: 'แก้ไข',\n        field: 'edit',\n        sort: 'asc',\n        width: 5,\n      },\n      {\n        label: 'ลบ',\n        field: 'delete',\n        sort: 'asc',\n        width: 5,\n      }\n    ],\n\n  });\n\n\n\n  const deleteHandle = (id)=>{\n    refLeave.where(\"uid\",\"==\",id)\n    .onSnapshot(doc=>{\n      let tempArrayLeaveOfUser = []\n      doc.forEach(data=>{\n        tempArrayLeaveOfUser=[\n          ...tempArrayLeaveOfUser,\n          {\n            leaveId:data.id,\n            reason:data.data().reson\n          }\n        ]\n      })\n      tempArrayLeaveOfUser.forEach(dataLeaveOfUser=>{\n        refAppove.where(\"leave_id\",\"==\",dataLeaveOfUser.leaveId)\n        .onSnapshot(doc=>{\n          doc.forEach(data=>{\n            refAppove.doc(data.id).delete()\n          })\n        })\n        \n        refLeave.doc(dataLeaveOfUser.leaveId).delete()\n      })\n        refQuota.where(\"uid\",\"==\",id)\n        .onSnapshot(doc=>{\n          doc.forEach(data=>{\n            refQuota.doc(data.id).delete()\n          })\n        })\n        refUser.doc(id).delete()\n    })\n        // delete user\n    axios.post(\"http://localhost:4000/deleteuser\",{id})\n    .then(()=>{\n      console.log(\"Delete User Success\")\n      setLoading(true)\n    })\n  }\n\n\n\n\n  const clickEditHandle = (data,uid) =>{\n    refQuota.where(\"uid\",\"==\",uid)\n    .onSnapshot(doc=>{\n      let tempArrayQuotaUser=[]\n      doc.forEach(data=>{\n        tempArrayQuotaUser=[\n          ...tempArrayQuotaUser,\n          {\n            quotaId:data.id,\n            type_leave_id:data.data().type_leave_id,\n            amount:data.data().amount,\n            uid:data.data().uid\n          }\n        ]\n      })\n      // tempArrayQuotaUser.forEach((dataQuotaOfUser,index)=>{\n      //   typeLeave.forEach(dataTypeLeave=>{\n      //     console.log(\"sasafasfasffa\")\n      //     if(dataTypeLeave.typeLeaveId===dataQuotaOfUser.type_leave_id){\n      //       tempArrayQuotaUser[index]=[\n      //         tempArrayQuotaUser[index],\n      //         {\n      //           type_leave_name:dataTypeLeave.type_leave_name\n      //         }\n      //       ]\n      //     }\n      //   })\n      // })\n      setQuotaOfUser(tempArrayQuotaUser)\n    })\n\n  }\n\n\n\n\n\n  useEffect( () => {\n    refTypeLeave.onSnapshot( doc=>{\n      let tempArrayTypeLeave=[]\n      doc.forEach( data=>{\n        tempArrayTypeLeave= [\n          ...tempArrayTypeLeave,\n          {\n            typeLeaveId:data.id,\n            type_leave_name:data.data().type_leave_name\n          }\n        ]\n      })\n      setTypeLeave(tempArrayTypeLeave)\n    })\n    refUser.onSnapshot( doc => {\n      let tempArrayUser = []\n      doc.forEach(  data => {\n        tempArrayUser =  [\n          ...tempArrayUser,\n          {\n            email: data.data().email,\n            fname: data.data().fname,\n            lname: data.data().lname,\n            name: data.data().name,\n            phone: data.data().phone,\n            uid: data.id,\n            user_group: data.data().user_group,\n            edit:<button  className=\"btn btn-sm btn-outline-success \" data-toggle=\"modal\" data-target=\"#staticBackdrop2\" onClick={()=>{clickEditHandle(data.data(),data.id)}}>แก้ไข</button>,\n            delete:<button  className=\"btn btn-sm btn-outline-danger\" onClick={()=>{deleteHandle(data.id)}}>ลบ</button> \n          }\n        ]\n      })\n        setUser(tempArrayUser)\n        setLoading(false)\n    })\n    \n    setDatatable({...datatable,rows:user})\n    \n    return (() => {\n    })\n  },[loading])\n  return (\n    <div>\n      <Checkadmin />\n      <Navbar />\n      <Sidebar />\n      {/* Content Wrapper. Contains page content */}\n      <div className=\"content-wrapper\">\n        {/* Content Header (Page header) */}\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n            </div>{/* /.row */}\n          </div>{/* /.container-fluid */}\n        </div>\n        {/* /.content-header */}\n        {/* Main content */}\n        <div className=\"content\">\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-lg-12\" style={{ height: '670px' }}>\n                <div className=\"card\">\n                  <div className=\"card-header \">\n                    <div className=\"d-flex justify-content-between\">\n                      <h3 className=\"m-0 text-dark click\" onClick={() => {console.log(typeLeave) }} >พนักงาน</h3>\n                      <Form />\n                    </div>\n                  </div>\n                  <div className=\"card-body table-responsive \">\n                    {\n                      loading ? (\n                        <div className=\"spinner-border mx-auto mr-4\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\n                        </div>\n                      ) : <MDBDataTableV5 hover entriesOptions={[5, 20, 25]}  entries={5} pagesAmount={4} data={datatable} searchTop searchBottom={false}/>\n                    }\n                  </div>\n                </div>\n              </div>\n              {/* /.col-md-6 */}\n              {/* /.col-md-6 */}\n            </div>\n            {/* /.row */}\n          </div>\n          {/* /.container-fluid */}\n        </div>\n        {/* /.content */}\n      </div>\n      {/* /.content-wrapper */}\n      {/* Control Sidebar */}\n      <aside className=\"control-sidebar control-sidebar-dark\">\n        {/* Control sidebar content goes here */}\n      </aside>\n      {/* /.control-sidebar */}\n      <Footer />\n\n {/* <!-- Modal of Edit user --> */}\n <div className=\"modal fade\" id=\"staticBackdrop2\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n   <div className=\"modal-dialog modal-xl\">\n     <div className=\"modal-content\">\n       <div className=\"modal-header\">\n         <h5 className=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n         <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n           <span aria-hidden=\"true\" onClick={()=>{console.log(quotaOfUser)}}>&times;</span>\n         </button>\n       </div>\n       <div className=\"modal-body\">\n       <div className=\"container-fluid\">\n                 <div className=\"row\">\n                   <div className=\"col-md-4\">\n                     <div className=\"form-group\">\n                       <label onClick={()=>{console.log()}}>อีเมล์</label>\n                       <input type=\"text\" className=\"form-control\" ></input>\n                     </div>\n                     <div className=\"form-group\">\n                       <label>ชื่อเล่น</label>\n                       <input type=\"text\" className=\"form-control\" ></input>\n                     </div>\n                     <div className=\"form-group\">\n                       <label>เบอร์โทรศัพ</label>\n                     <input type=\"text\"  className=\"form-control\" ></input>\n                     </div>\n                   </div>\n                   <div className=\"col-md-4\">\n                     <div className=\"form-group\">\n                       <label>ชื่อจริง</label>\n                       <input type=\"text\"   className=\"form-control\"  ></input>\n                     </div>\n                     <div className=\"form-group\">\n                       <label>นามสกุล</label>\n                       <input type=\"text\"   className=\"form-control\"></input>\n                     </div>\n\n                   </div>\n                   <div className=\"col-md-3\">\n                        {\n                          quotaOfUser.map((data,index)=>(\n                            <div className=\"form-group\" key={index}>\n                              {\n                                typeLeave.map((dataTypeLeave,i)=>{\n                                  if(dataTypeLeave.typeLeaveId===data.type_leave_id){\n                                    return  <label key={i}>{dataTypeLeave.type_leave_name}</label>\n                                  }\n                                })\n                              }\n                              <input type=\"number\" className=\"form-control\"/>\n                            </div>\n                          ))\n                        }\n                   </div>\n                 </div>\n                 </div>\n       </div>\n       <div className=\"modal-footer\">\n         <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>{}}>ปิด</button>\n         <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>{}}>บันทึก</button>\n       </div>\n     </div>\n   </div>\n </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}